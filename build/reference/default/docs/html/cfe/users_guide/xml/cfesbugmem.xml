<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="cfesbugmem" kind="page">
    <compoundname>cfesbugmem</compoundname>
    <title>Memory</title>
    <detaileddescription>
<para>The software bus statically allocates a block of memory for message buffers and subscription blocks. The size of this memory block is defined by the platform configuration parameter #CFE_SB_BUF_MEMORY_BYTES. The memory is managed by the cFE ES memory pool and is used only by the software bus. The ES memory pool allows an application to define the block sizes for the pool at compile time. These sizes are defined by the platform configuration parameters prefixed with CFE_SB_MEM_BLOCK_SIZE (for example, #CFE_SB_MEM_BLOCK_SIZE_01). It is recommended that a project tailor these values for the mission, based on the software bus packet sizes.</para><para>At the time a message is sent, two buffers are allocated from the pool. One for a buffer descriptor (<ref refid="struct_c_f_e___s_b___buffer_d__t" kindref="compound">CFE_SB_BufferD_t</ref>) and one for the size of the packet. Both buffers are returned to the pool when the message has been received by all recipients. More precisely, if there is one recipient for a message, the message buffers will be released on the following call to cFE_SB_RcvMsg for the pipe that received the message.</para><para>Also when subscriptions are received through the subscribe API&apos;s, the software bus allocates a subscription block (<ref refid="struct_c_f_e___s_b___destination_d__t" kindref="compound">CFE_SB_DestinationD_t</ref>) from the pool. The subscription blocks are returned to the pool if and when the subscription is nullified through a <ref refid="cfe__sb_8h_1a70ea901e65f03221e3787d73733db060" kindref="member">CFE_SB_Unsubscribe</ref> call.</para><para>The software bus provides a set of figures regarding memory capacity, current memory utilization and high water marks relevant to the SB memory pool. This information may be requested by sending the command to dump the SB statistics packet. In addition, the current memory utilization value and the &apos;unmarked memory&apos; value (#CFE_SB_BUF_MEMORY_BYTES<itemizedlist>
<listitem><para>peak memory in use) are sent in software bus housekeeping telemetry. The unmarked memory value should be monitored regularly to ensure that the value (in bytes) does not continue to decline or approach zero. If this value were to approach zero, there is a possibility that memory requests would fail which may inhibit the sending of a message. The current memory utilization value should also be monitored to ensure the system contains no memory leaks. The value (in bytes) should remain stable under nominal conditions. Refer to the ES users guide for more information regarding the ES Memory Pool.</para></listitem></itemizedlist>
</para><para>Next: <ref refid="cfesbugauto" kindref="compound">Autonomous Actions</ref> <linebreak/>
 Prev: <ref refid="cfesbugsubs" kindref="compound">Subscriptions</ref> <linebreak/>
 Up To: <ref refid="cfesbugterms" kindref="compound">Software Bus Terminology</ref> </para>    </detaileddescription>
  </compounddef>
</doxygen>
