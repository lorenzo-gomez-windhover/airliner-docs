<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Core Flight Executive Users Guide: SB Event Filtering</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Core Flight Executive Users Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Core Flight Executive Documentation</a></li><li class="navelem"><a class="el" href="cfesbovr.html">cFE Software Bus Overview</a></li><li class="navelem"><a class="el" href="cfesbugops.html">Operation of the SB Software</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SB Event Filtering </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most filtering for SB events is performed by the cFE Event Services (EVS). Filtering for SB events may be specified in the cFE platform configuration file or may be commanded after the system initializes. There is no SB event log that limits the number of events based on the capacity of the log, as in the heritage software bus.</p>
<p>There is one case in which events are filtered by the software bus instead of event services. This occurs when the software bus needs to suppress events so that a fatal recursive event condition does not transpire. Because the <a class="el" href="cfe__sb_8h.html#a91b4b63f7d168bd78dc92d894ad7f77d" title="Send a software bus message. ">CFE_SB_SendMsg</a> API is a library function that calls <a class="el" href="cfe__evs_8h.html#a811a2fa1e9ac02cee9f39cb4a6c08075" title="Generate a software event. ">CFE_EVS_SendEvent</a>, and <a class="el" href="cfe__evs_8h.html#a811a2fa1e9ac02cee9f39cb4a6c08075" title="Generate a software event. ">CFE_EVS_SendEvent</a> is a library function that calls <a class="el" href="cfe__sb_8h.html#a91b4b63f7d168bd78dc92d894ad7f77d" title="Send a software bus message. ">CFE_SB_SendMsg</a>, a calling sequence could cause a stack overflow if the recursion is not properly terminated. The cFE software bus detects this condition and properly terminates the recursion. This is done by using a set of flags (one flag per event in the Send API) which determine whether an API has relinquished its stack. If the <a class="el" href="cfe__sb_8h.html#a91b4b63f7d168bd78dc92d894ad7f77d" title="Send a software bus message. ">CFE_SB_SendMsg</a> needs to send an event that may cause recursion, the flag is set and the event is sent. <a class="el" href="cfe__evs_8h.html#a811a2fa1e9ac02cee9f39cb4a6c08075" title="Generate a software event. ">CFE_EVS_SendEvent</a> then calls <a class="el" href="cfe__sb_8h.html#a91b4b63f7d168bd78dc92d894ad7f77d" title="Send a software bus message. ">CFE_SB_SendMsg</a> in the same thread. If the second call to <a class="el" href="cfe__sb_8h.html#a91b4b63f7d168bd78dc92d894ad7f77d" title="Send a software bus message. ">CFE_SB_SendMsg</a> needs to send that same event again, it finds that the flag is set and the <a class="el" href="cfe__evs_8h.html#a811a2fa1e9ac02cee9f39cb4a6c08075" title="Generate a software event. ">CFE_EVS_SendEvent</a> call is bypassed, terminating the recursion. The result is that the user will see only one event instead of the many events that would normally occur without the protection. The heritage software bus did not have this condition because it stored events in the software bus event log and another thread would read them out at a later time.</p>
<p>Next: <a class="el" href="cfesbugdiagdata.html">Diagnostic Data</a> <br />
 Prev: <a class="el" href="cfesbugovererr.html">Pipe Overflow Error</a> <br />
 Up To: <a class="el" href="cfesbugops.html">Operation of the SB Software</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
