<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Core Flight Executive Users Guide: Event Message Filtering</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Core Flight Executive Users Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Core Flight Executive Documentation</a></li><li class="navelem"><a class="el" href="cfeevsovr.html">cFE Event Services Overview</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Event Message Filtering </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>EVS uses a hexadecimal bit mask that controls how often a message is filtered. An event's filter mask is bit-wise ANDed with the event's event counter. There is one event counter for each event ID. If the result of the ANDing is zero then the message is sent.</p>
<p>Filter masks can be set so that one out of 1, 2, 4, 8 events are sent. Some examples of masks that use this pattern are: (0x0000, Every one), (0x0001, One of every 2), (0x0003, One of every 4), and (0x0007, One of every 8.</p>
<p>Filter masks can also be set so that only the first n events are sent. For example, the mask 0xFFFF generates one event message and then stops. Note that when the filter counter is reset to zero by command, this will restart the counting and enable n more events to be sent.</p>
<p>Event messages will be filtered until <a class="el" href="cfe__evs__task_8h.html#a9e3a56f296db523bd0b65e7529649417">CFE_EVS_MAX_FILTER_COUNT</a> events of the filtered event ID from the application have been received. After this, the filtering will become locked (no more of that event will be received by the ground) until the filter is either reset or deleted by ground command. This is to prevent the counter from rolling over, which would cause some filters to behave improperly. An event message will be sent when this maximum count is reached.</p>
<p>The following shows an example of how filtering works using a filter mask of x'0001', resulting in sending every other event:</p>
<table  border="1" cellpadding="2" width="100%">
<tr>
<td>&#160; </td><td><b>packet x</b> </td><td><b>packet X+1</b> </td><td><b>packet X+2</b> </td><td><b>packet X+3</b> </td><td><b>packet X+4</b> </td><td><b>...</b> </td></tr>
<tr>
<td><b>Event ID counter</b> </td><td>x'0000' </td><td>x'0001' </td><td>x'0002' </td><td>x'0003' </td><td>x'0004' </td><td>&#160; </td></tr>
<tr>
<td><b>Event Filter mask</b> </td><td>x'0001' </td><td>x'0001' </td><td>x'0001' </td><td>x'0001' </td><td>x'0001' </td><td>&#160; </td></tr>
<tr>
<td><b>Bitwise AND results</b> </td><td>x'0000' </td><td>x'0001' </td><td>x'0000' </td><td>x'0001' </td><td>x'0000' </td><td>&#160; </td></tr>
<tr>
<td><b>Send event?</b> </td><td>Yes </td><td>No </td><td>Yes </td><td>No </td><td>Yes </td><td>&#160; </td></tr>
</table>
<p>In this example, the ground uses a filter mask of x'FFFE' resulting in the first two events being sent and then no more.</p>
<table  border="1" cellpadding="2" width="100%">
<tr>
<td>&#160; </td><td><b>packet x</b> </td><td><b>packet X+1</b> </td><td><b>packet X+2</b> </td><td><b>packet X+3</b> </td><td><b>packet X+4</b> </td><td><b>...</b> </td></tr>
<tr>
<td><b>Event ID counter</b> </td><td>x'0000' </td><td>x'0001' </td><td>x'0002' </td><td>x'0003' </td><td>x'0004' </td><td>&#160; </td></tr>
<tr>
<td><b>Event Filter mask</b> </td><td>x'FFFE' </td><td>x'FFFE' </td><td>x'FFFE' </td><td>x'FFFE' </td><td>x'FFFE' </td><td>&#160; </td></tr>
<tr>
<td><b>Bitwise AND results</b> </td><td>x'0000' </td><td>x'0000' </td><td>x'0002' </td><td>x'0002' </td><td>x'0004' </td><td>&#160; </td></tr>
<tr>
<td><b>Send event?</b> </td><td>Yes </td><td>Yes </td><td>No </td><td>No </td><td>No </td><td>&#160; </td></tr>
</table>
<p>See <a class="el" href="cfe__evs_8h.html">cfe_evs.h</a> for predefined macro values which can be used for masks.</p>
<p>Next: <a class="el" href="cfeevsugregistry.html">EVS Registry</a> <br />
 Prev: <a class="el" href="cfeevsugmsgcntrl.html">Event Message Control</a> <br />
 Up To: <a class="el" href="cfeevsovr.html">cFE Event Services Overview</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
