<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="cfslcopr" kind="page">
    <compoundname>cfslcopr</compoundname>
    <title>CFS Limit Checker Operation</title>
    <detaileddescription>
<para>The CFS Limit Checker has three modes of operation, set by the <ref refid="lc__msgdefs_8h_1ae89692a0175dd7fbe39b0cb63ddc1ba9" kindref="member">LC_SET_LC_STATE_CC</ref> ground command and echoed in the CurrentLCState housekeeping variable.</para><para>Active - Active mode is the normal operation mode. In Active mode, the LC task performs all limit tests defined in the watchpoint definition table and will invoke stored command sequences if the results of watchpoint evaluations trigger an actionpoint condition as defined in the actionpoint definition table.</para><para>Passive - In Passive mode, the LC task behaves just like in Active mode except no stored command sequences will be invoked as a result of actionpoint triggers.</para><para>Disabled - When disabled, the LC task will perform no watchpoint or actionpoint limit tests.</para><para>Watchpoints are evaluated whenever a message containing the telemetry point is received by LC. Watchpoints may evaluate to <ref refid="lc__tbldefs_8h_1a460943a8ab1a97e5b296e3b974877abf" kindref="member">LC_WATCH_TRUE</ref>, <ref refid="lc__tbldefs_8h_1ad3dfc9c5fed52150fb7d7f252cbb5fe3" kindref="member">LC_WATCH_FALSE</ref>, #LC_WATCH_NOT_MEASURED or <ref refid="lc__tbldefs_8h_1ac92b16019803fd9448eab79d1266973c" kindref="member">LC_WATCH_ERROR</ref>. Watchpoints can not be individually disabled. The only ways to keep Watchpoints from being evaluated are to squelch the telemetry packet on which they trigger, load a WDT that undefines a Watchpoint or disable the entire LC task.</para><para>Actionpoints are evaluated whenever LC receives a message with the <ref refid="lc__msgids_8h_1a156d2d4b7fa00933aa4f34253f8dfe74" kindref="member">LC_SAMPLE_AP_MID</ref> message ID. This message contains a parameter indicating which actionpoint to evaluate. A single actionpoint can be specified by using the actionpoint ID (0 to <ref refid="lc__platform__cfg_8h_1ab49788ed10c3f7f4aaaa876a48b49ba3" kindref="member">LC_MAX_ACTIONPOINTS</ref>). All actionpoints can be evaluated by specifying xFFFF as the parameter. There is no way to evaluate multiple actionpoints other than ALL within a single message. An Actionpoint defines a logical relationship between one or more Watchpoint results. This logical relationship is defined in the form of a Reverse Polish Notation (RPN) expression in the actionpoint definition specified in the ADT. The result of this RPN evaluation is either <ref refid="lc__tbldefs_8h_1a0d820b4ac78559654a530fca07d3618d" kindref="member">LC_ACTION_PASS</ref>, <ref refid="lc__tbldefs_8h_1a9b113f330c8222236cf4e92732e024c5" kindref="member">LC_ACTION_FAIL</ref>, #LC_ACTION_NOT_MEASURED or <ref refid="lc__tbldefs_8h_1a69b1f15ea8bd9f62b4f3ea9eab7dcfa6" kindref="member">LC_ACTION_ERROR</ref>. In the Actionpoint definition, a maximum number of consecutive fails is specified. If an Actionpoint fails the specified number of times consecutively, LC sends a request to the Stored Command (SC) application to execute a RTS (Relative Time Sequence) of commands as a response to this condition.</para><para>Actionpoints can be individually enabled/disabled with the <ref refid="lc__msgdefs_8h_1a65ef61d17b6006a1f24bbeb61de06612" kindref="member">LC_SET_AP_STATE_CC</ref> ground command. The state of an actionpoint may be set to <ref refid="lc__msgdefs_8h_1a8d7d19346c3a24515ee300e89c0fbcf6" kindref="member">LC_APSTATE_ACTIVE</ref>, <ref refid="lc__msgdefs_8h_1a50c3fd705ae749e6b015d926e4183c54" kindref="member">LC_APSTATE_PASSIVE</ref>, or <ref refid="lc__msgdefs_8h_1abebab7aac8a748c086cdf4b74dcdd489" kindref="member">LC_APSTATE_DISABLED</ref>. These states operate in the same way as the application operating modes described above. <ref refid="lc__msgdefs_8h_1a50c3fd705ae749e6b015d926e4183c54" kindref="member">LC_APSTATE_PASSIVE</ref> will just disable RTS requests, while <ref refid="lc__msgdefs_8h_1abebab7aac8a748c086cdf4b74dcdd489" kindref="member">LC_APSTATE_DISABLED</ref> will stop evaluation of the actionpoint all together. An additional state <ref refid="lc__msgdefs_8h_1a96216b9bd442bbfb94406364260ea711" kindref="member">LC_APSTATE_PERMOFF</ref> which functions the same as <ref refid="lc__msgdefs_8h_1abebab7aac8a748c086cdf4b74dcdd489" kindref="member">LC_APSTATE_DISABLED</ref> but can only be changed via table load, can be set using the <ref refid="lc__msgdefs_8h_1a6a28b576275502e48c64148592cdf132" kindref="member">LC_SET_AP_PERMOFF_CC</ref> ground command (see <ref refid="cfslcfaqs" kindref="compound">CFS Limit Checker Frequently Asked Questions</ref>).</para><para>An example of this watchpoint/actionpoint relationship is shown in the following diagram: <image type="html" name="LC_Monitor_Process.png">LC Monitoring Process Example Diagram</image>
 <linebreak/>
</para><para>Since LC is a table driven application, it&apos;s behavior is dictated by the contents of the WDT and ADT configuration tables. To change this behavior is simply a matter of loading a new table with modified parameters. LC will check for any pending table updates whenever it processes a housekeeping request. If the table passes validation it will go into effect right away before the next message is read from the software bus. It is not necessary to disable LC before updating a table, however since the watchpoint and actionpoint definitions use two separate tables, careful attention needs to be paid to ensure that the tables are consistent with each other whenever LC is active. For this reason, a mission may choose to always disable LC prior to any table updates and then re-enable monitoring.</para><para>When either the WDT or ADT are updated, the corresponding results table (WRT or ART) is reset to initialization values.</para><para>Ideally, LC should require no intervention from the ground on a routine basis. Once monitoring is enabled, it will keep processing data and checking for threshold violations (assuming regular scheduler input).</para><para>Next: <ref refid="cfslcreq" kindref="compound">CFS Limit Checker Requirements</ref> <linebreak/>
 Prev: <ref refid="cfslcovr" kindref="compound">CFS Limit Checker Overview</ref> </para>    </detaileddescription>
  </compounddef>
</doxygen>
