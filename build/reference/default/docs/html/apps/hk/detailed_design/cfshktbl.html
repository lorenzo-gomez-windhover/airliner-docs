<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CFS Housekeeping (HK) Application on  Detailed Design: CFS Housekeeping Table Definitions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CFS Housekeeping (HK) Application on  Detailed Design
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">CFS Housekeeping Application (HK) User&#39;s Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CFS Housekeeping Table Definitions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table  border="1" cellpadding="2" width="60%" align="CENTER">
<tr>
<td width="20%" align="CENTER"><b><a class="el" href="cfshkcmds.html">CFS Housekeeping Commands</a></b> </td><td width="20%" align="CENTER"><b><a class="el" href="cfshktlm.html">CFS Housekeeping Telemetry</a></b>  </td><td width="20%" align="CENTER"><b><a class="el" href="cfshkcfg.html">CFS Housekeeping Configuration Parameters</a></b> </td></tr>
</table>
<p>The Housekeeping Application uses two tables. A load-dump table referred to as the "copy table" and a dump-only table referred to as the "run-time table". Each table has the same number of entries, defined by the configuration parameter <a class="el" href="hk__platform__cfg_8h.html#acba1b1ddefd87cf30a4963b0734deddf">HK_COPY_TABLE_ENTRIES</a>. Each run-time table entry has a direct correspondence to the same copy table entry. During normal operation, the fields in the run-time table change periodically while the copy table fields are static. Two tables were chosen so that checksumming can be executed on the more-static copy table.</p>
<p><b>HK Copy Table Validation</b> - The HK copy table currently has an empty validation call-back function that always returns success. At the time of development, a validation process that would apply to all projects was not perceived.</p>
<p><b>HK Copy Table Entries</b> - Each entry in the copy table has five fields and can be translated to the following phrase: <br />
 <em>Copy A bytes from input message B, byte-offset C to output message Y, byte-offset Z. </em></p>
<p>The structure format of a single copy table entry is as follows:</p>
<pre class="fragment">typedef struct
{
    CFE_SB_MsgId_t      InputMid;    
    uint16              InputOffset; 
    CFE_SB_MsgId_t      OutputMid;   
    uint16              OutputOffset;
    uint16              NumBytes;    
} hk_copy_table_entry_t;
</pre><p><b>HK Run-time Table Entries</b> - Each entry in the run-time table holds the address of the output packet and has variables that tell whether the input message ID has been subscribed to and whether or not the data from this entry is present in the output packet (since the last time the output packet was sent).</p>
<p>The structure format of a single run-time table entry is as follows:</p>
<pre class="fragment">typedef struct
{
    CFE_SB_MsgPtr_t     OutputPktAddr;
    uint8               InputMidSubscribed;
    uint8               DataPresent;
} hk_runtime_tbl_entry_t;
</pre><p><b>HK Copy Table Updates</b> - The copy table is polled for changes every housekeeping request. When an update is pending, HK cleans-up the SB subscriptions and frees the memory (allocated for output messages) from the old table. After the old table cleanup is complete, the new table is updated, then processed. The processing involves subscribing to input messages, allocating memory for the output messages and initializing runtime variables.</p>
<p>Next: <a class="el" href="cfshkcons.html">CFS Housekeeping Constraints</a> <br />
 Prev: <a class="el" href="cfshktlm.html">CFS Housekeeping Telemetry</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
