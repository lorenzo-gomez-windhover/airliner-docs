<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="nak_8c" kind="file" language="C++">
    <compoundname>nak.c</compoundname>
    <includes refid="cfdp_8h" local="yes">cfdp.h</includes>
    <includes refid="cfdp__private_8h" local="yes">cfdp_private.h</includes>
    <incdepgraph>
      <node id="3950">
        <label>misc.h</label>
        <link refid="misc_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3937">
        <label>cfdp_syntax.h</label>
        <link refid="cfdp__syntax_8h"/>
      </node>
      <node id="3938">
        <label>cfdp_requires.h</label>
        <link refid="cfdp__requires_8h"/>
        <childnode refid="3931" relation="include">
        </childnode>
      </node>
      <node id="3940">
        <label>validate_user_config.h</label>
        <link refid="validate__user__config_8h"/>
        <childnode refid="3933" relation="include">
        </childnode>
      </node>
      <node id="3926">
        <label>cfdp_provides.h</label>
        <link refid="cfdp__provides_8h"/>
        <childnode refid="3927" relation="include">
        </childnode>
        <childnode refid="3928" relation="include">
        </childnode>
        <childnode refid="3929" relation="include">
        </childnode>
        <childnode refid="3930" relation="include">
        </childnode>
        <childnode refid="3931" relation="include">
        </childnode>
        <childnode refid="3937" relation="include">
        </childnode>
      </node>
      <node id="3942">
        <label>message_class.h</label>
        <link refid="message__class_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3928">
        <label>stdlib.h</label>
      </node>
      <node id="3941">
        <label>structures.h</label>
        <link refid="structures_8h"/>
        <childnode refid="3931" relation="include">
        </childnode>
      </node>
      <node id="3944">
        <label>event.h</label>
        <link refid="event_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3959">
        <label>callbacks.h</label>
        <link refid="callbacks_8h"/>
      </node>
      <node id="3924">
        <label>apps/cf/fsw/src/PRI/nak.c</label>
        <link refid="nak.c"/>
        <childnode refid="3925" relation="include">
        </childnode>
        <childnode refid="3939" relation="include">
        </childnode>
      </node>
      <node id="3951">
        <label>nak.h</label>
        <link refid="nak_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3931">
        <label>cfdp_data_structures.h</label>
        <link refid="cfdp__data__structures_8h"/>
        <childnode refid="3932" relation="include">
        </childnode>
        <childnode refid="3933" relation="include">
        </childnode>
      </node>
      <node id="3946">
        <label>pdu_as_string.h</label>
        <link refid="pdu__as__string_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3925">
        <label>cfdp.h</label>
        <link refid="cfdp_8h"/>
        <childnode refid="3926" relation="include">
        </childnode>
        <childnode refid="3938" relation="include">
        </childnode>
      </node>
      <node id="3952">
        <label>nak_mem.h</label>
        <link refid="nak__mem_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3957">
        <label>s1.h</label>
        <link refid="s1_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3929">
        <label>string.h</label>
      </node>
      <node id="3936">
        <label>cf_defs.h</label>
        <link refid="cf__defs_8h"/>
      </node>
      <node id="3948">
        <label>machine_list.h</label>
        <link refid="machine__list_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3930">
        <label>unistd.h</label>
      </node>
      <node id="3954">
        <label>aaa.h</label>
        <link refid="aaa_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
        <childnode refid="3939" relation="include">
        </childnode>
      </node>
      <node id="3943">
        <label>timer.h</label>
        <link refid="timer_8h"/>
        <childnode refid="3932" relation="include">
        </childnode>
      </node>
      <node id="3955">
        <label>r1.h</label>
        <link refid="r1_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3945">
        <label>pdu.h</label>
        <link refid="pdu_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
        <childnode refid="3939" relation="include">
        </childnode>
      </node>
      <node id="3932">
        <label>time.h</label>
      </node>
      <node id="3958">
        <label>s2.h</label>
        <link refid="s2_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3947">
        <label>machine.h</label>
        <link refid="machine_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3934">
        <label>osconfig.h</label>
      </node>
      <node id="3939">
        <label>cfdp_private.h</label>
        <link refid="cfdp__private_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
        <childnode refid="3940" relation="include">
        </childnode>
        <childnode refid="3941" relation="include">
        </childnode>
        <childnode refid="3942" relation="include">
        </childnode>
        <childnode refid="3943" relation="include">
        </childnode>
        <childnode refid="3944" relation="include">
        </childnode>
        <childnode refid="3945" relation="include">
        </childnode>
        <childnode refid="3946" relation="include">
        </childnode>
        <childnode refid="3947" relation="include">
        </childnode>
        <childnode refid="3948" relation="include">
        </childnode>
        <childnode refid="3949" relation="include">
        </childnode>
        <childnode refid="3950" relation="include">
        </childnode>
        <childnode refid="3951" relation="include">
        </childnode>
        <childnode refid="3952" relation="include">
        </childnode>
        <childnode refid="3953" relation="include">
        </childnode>
        <childnode refid="3954" relation="include">
        </childnode>
        <childnode refid="3955" relation="include">
        </childnode>
        <childnode refid="3956" relation="include">
        </childnode>
        <childnode refid="3957" relation="include">
        </childnode>
        <childnode refid="3958" relation="include">
        </childnode>
        <childnode refid="3959" relation="include">
        </childnode>
      </node>
      <node id="3949">
        <label>mib.h</label>
        <link refid="mib_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
        <childnode refid="3939" relation="include">
        </childnode>
      </node>
      <node id="3933">
        <label>cfdp_config.h</label>
        <link refid="cfdp__config_8h"/>
        <childnode refid="3934" relation="include">
        </childnode>
        <childnode refid="3935" relation="include">
        </childnode>
        <childnode refid="3936" relation="include">
        </childnode>
      </node>
      <node id="3953">
        <label>utils.h</label>
        <link refid="utils_8h"/>
      </node>
      <node id="3956">
        <label>r2.h</label>
        <link refid="r2_8h"/>
        <childnode refid="3925" relation="include">
        </childnode>
      </node>
      <node id="3927">
        <label>stdio.h</label>
      </node>
      <node id="3935">
        <label>cf_platform_cfg.h</label>
        <link refid="cf__platform__cfg_8h"/>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" prot="public" static="no">
        <name>NO</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="35" column="9" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="35" bodyend="-1"/>
        <referencedby refid="nak_8h_1ad7508955275728f832bae91dbce452bf" compoundref="nak_8c" startline="635" endline="670">nak__gaps_as_string</referencedby>
        <referencedby refid="nak_8h_1a75559ed69d551bae8df5c28783c96840" compoundref="nak_8c" startline="392" endline="412">nak__init</referencedby>
        <referencedby refid="nak_8h_1a4615783cb78ba2f77e5821db1d3bb9c6" compoundref="nak_8c" startline="557" endline="564">nak__is_list_empty</referencedby>
        <referencedby refid="nak_8h_1a7fe68457ee6fb90ded7cf12c191df2be" compoundref="nak_8c" startline="569" endline="628">nak__list_as_string</referencedby>
        <referencedby refid="nak_8h_1add3a8f00158d3b1ecf1780c6450ad43b" compoundref="nak_8c" startline="676" endline="680">nak__metadata_sent_or_received</referencedby>
      </memberdef>
      <memberdef kind="define" id="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" prot="public" static="no">
        <name>YES</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="36" column="9" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="36" bodyend="-1"/>
        <referencedby refid="nak_8h_1ad7508955275728f832bae91dbce452bf" compoundref="nak_8c" startline="635" endline="670">nak__gaps_as_string</referencedby>
        <referencedby refid="nak_8h_1a75559ed69d551bae8df5c28783c96840" compoundref="nak_8c" startline="392" endline="412">nak__init</referencedby>
        <referencedby refid="nak_8h_1a4615783cb78ba2f77e5821db1d3bb9c6" compoundref="nak_8c" startline="557" endline="564">nak__is_list_empty</referencedby>
        <referencedby refid="nak_8h_1a7fe68457ee6fb90ded7cf12c191df2be" compoundref="nak_8c" startline="569" endline="628">nak__list_as_string</referencedby>
      </memberdef>
      <memberdef kind="define" id="nak_8c_1aa3ceda8162f745afb15f7f080646ab17" prot="public" static="no">
        <name>LONGEST_STRING</name>
        <initializer>256</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="571" column="9"/>
        <referencedby refid="nak_8h_1a7fe68457ee6fb90ded7cf12c191df2be" compoundref="nak_8c" startline="569" endline="628">nak__list_as_string</referencedby>
      </memberdef>
      <memberdef kind="define" id="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1" prot="public" static="no">
        <name>LONGEST_SUBSTRING</name>
        <initializer>32</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="572" column="9"/>
        <referencedby refid="nak_8h_1ad7508955275728f832bae91dbce452bf" compoundref="nak_8c" startline="635" endline="670">nak__gaps_as_string</referencedby>
        <referencedby refid="nak_8h_1a7fe68457ee6fb90ded7cf12c191df2be" compoundref="nak_8c" startline="569" endline="628">nak__list_as_string</referencedby>
      </memberdef>
      <memberdef kind="define" id="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1" prot="public" static="no">
        <name>LONGEST_SUBSTRING</name>
        <initializer>32</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="638" column="9"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="nak_8c_1a5a7d8cef8598bae9e2830b05b429d20a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__add_node_to_end_of_list</definition>
        <argsstring>(NAK *nak_ptr, NODE *neww)</argsstring>
        <name>m__add_node_to_end_of_list</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> *</type>
          <declname>neww</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="42" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="42" bodyend="59"/>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" compoundref="nak_8c" startline="165" endline="188">m__add_gap_to_list</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__new_node</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 begin, u_int_4 end, NODE **neww)</argsstring>
        <name>m__new_node</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> **</type>
          <declname>neww</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="64" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="64" bodyend="93"/>
        <references refid="structgap_1a12391414ff856122bc95438776497cbd" compoundref="structures_8h" startline="138">gap::begin</references>
        <references refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" compoundref="utils_8c" startline="508" endline="512">cfdp_is_message_class_enabled</references>
        <references refid="cfdp__provides_8h_1ae127172185349b64e5971dbee9c6f396" compoundref="cfdp__provides_8h" startline="219">CFDP_MSG_DEBUG_NAK</references>
        <references refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" compoundref="callbacks_8h" startline="60">d_msg__</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="nak__mem_8c_1aaf9213754508469f0f30a14f5fbcc597" compoundref="nak__mem_8c" startline="89" endline="114">nak_mem__malloc</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" compoundref="nak_8c" startline="165" endline="188">m__add_gap_to_list</referencedby>
        <referencedby refid="nak_8c_1a17224efd244e12bae6763ff15b88e48b" compoundref="nak_8c" startline="233" endline="308">m__remove_range_from_node</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1aaa802666e5af53eb7278f31bd8012ab0" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__previous</definition>
        <argsstring>(NAK *nak_ptr, NODE *current, NODE **previous)</argsstring>
        <name>m__previous</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> *</type>
          <declname>current</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> **</type>
          <declname>previous</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="98" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="98" bodyend="131"/>
        <references refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" compoundref="cfdp__config_8h" startline="267">ASSERT__</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" compoundref="nak_8c" startline="193" endline="228">m__remove_node</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1af6dddc5bbfe6fb426bbb30b4c6111d13" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__incorporate_gap</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 begin, u_int_4 end)</argsstring>
        <name>m__incorporate_gap</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="136" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="136" bodyend="160"/>
        <references refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" compoundref="cfdp__config_8h" startline="267">ASSERT__</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" compoundref="nak_8c" startline="165" endline="188">m__add_gap_to_list</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__add_gap_to_list</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 begin, u_int_4 end)</argsstring>
        <name>m__add_gap_to_list</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="165" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="165" bodyend="188"/>
        <references refid="nak_8c_1a5a7d8cef8598bae9e2830b05b429d20a" compoundref="nak_8c" startline="42" endline="59">m__add_node_to_end_of_list</references>
        <references refid="nak_8c_1af6dddc5bbfe6fb426bbb30b4c6111d13" compoundref="nak_8c" startline="136" endline="160">m__incorporate_gap</references>
        <references refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" compoundref="nak_8c" startline="64" endline="93">m__new_node</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8h_1a38b169f5d212f6bb63bc72c65a04e2e5" compoundref="nak_8c" startline="455" endline="533">nak__data_received</referencedby>
        <referencedby refid="nak_8h_1a0816b9c5e8fc3254f65f450d8692bc56" compoundref="nak_8c" startline="417" endline="435">nak__set_end_of_scope</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__remove_node</definition>
        <argsstring>(NAK *nak_ptr, NODE *obsolete)</argsstring>
        <name>m__remove_node</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> *</type>
          <declname>obsolete</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="193" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="193" bodyend="228"/>
        <references refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" compoundref="cfdp__config_8h" startline="267">ASSERT__</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="nak_8c_1aaa802666e5af53eb7278f31bd8012ab0" compoundref="nak_8c" startline="98" endline="131">m__previous</references>
        <references refid="nak__mem_8c_1aa082478453d5bb8b451ce6600d742797" compoundref="nak__mem_8c" startline="53" endline="84">nak_mem__free</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8c_1a17224efd244e12bae6763ff15b88e48b" compoundref="nak_8c" startline="233" endline="308">m__remove_range_from_node</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a17224efd244e12bae6763ff15b88e48b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__remove_range_from_node</definition>
        <argsstring>(NAK *nak_ptr, NODE *p, u_int_4 begin, u_int_4 end)</argsstring>
        <name>m__remove_range_from_node</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> *</type>
          <declname>p</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="233" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="233" bodyend="308"/>
        <references refid="cfdp__config_8h_1a848085db8cbbc78a4c21d2ed01271b69" compoundref="cfdp__config_8h" startline="277">ASSERT__BUG_DETECTED</references>
        <references refid="structgap_1a12391414ff856122bc95438776497cbd" compoundref="structures_8h" startline="138">gap::begin</references>
        <references refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" compoundref="utils_8c" startline="508" endline="512">cfdp_is_message_class_enabled</references>
        <references refid="cfdp__provides_8h_1ae127172185349b64e5971dbee9c6f396" compoundref="cfdp__provides_8h" startline="219">CFDP_MSG_DEBUG_NAK</references>
        <references refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" compoundref="callbacks_8h" startline="60">d_msg__</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" compoundref="nak_8c" startline="64" endline="93">m__new_node</references>
        <references refid="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" compoundref="nak_8c" startline="193" endline="228">m__remove_node</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" compoundref="nak_8c" startline="313" endline="335">m__remove_range_from_list</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void m__remove_range_from_list</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 begin, u_int_4 end)</argsstring>
        <name>m__remove_range_from_list</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="313" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="313" bodyend="335"/>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="nak_8c_1a17224efd244e12bae6763ff15b88e48b" compoundref="nak_8c" startline="233" endline="308">m__remove_range_from_node</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <referencedby refid="nak_8h_1a38b169f5d212f6bb63bc72c65a04e2e5" compoundref="nak_8c" startline="455" endline="533">nak__data_received</referencedby>
        <referencedby refid="nak_8h_1a1c8e0561faf62519fd25b5965524edba" compoundref="nak_8c" startline="440" endline="450">nak__data_sent</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1ae0aedd64d02087c790f57bb58e0f7cdc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__copy_nak</definition>
        <argsstring>(NAK *dest_ptr, NAK *src_ptr)</argsstring>
        <name>nak__copy_nak</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>dest_ptr</declname>
        </param>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>src_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="340" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="340" bodyend="387"/>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" compoundref="structures_8h" startline="290">NAK::gap</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" compoundref="structures_8h" startline="289">NAK::in_use</references>
        <references refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" compoundref="structures_8h" startline="286">NAK::is_metadata_missing</references>
        <references refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" compoundref="cfdp__config_8h" startline="91">MAX_GAPS_PER_TRANSACTION</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" compoundref="structures_8h" startline="284">NAK::start_of_scope</references>
        <referencedby refid="s2_8h_1ab8cf22449e96aba2a0eba61b08b8e6ab" compoundref="s2_8c" startline="378" endline="842">s2__state_table</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a3e3ace1ad5fe5553cee03be1c43ce7d2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__init</definition>
        <argsstring>(NAK *nak_ptr, int sender_or_receiver)</argsstring>
        <name>nak__init</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type>int</type>
          <declname>sender_or_receiver</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="392" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="392" bodyend="412"/>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="nak_8h_1a741c56f36f51042ec7d2908b17fec458" compoundref="nak_8h" startline="44">I_AM_A_RECEIVER</references>
        <references refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" compoundref="structures_8h" startline="286">NAK::is_metadata_missing</references>
        <references refid="nak__mem_8c_1a66dbd4aaa7e98eb8833cb8816a9751c0" compoundref="nak__mem_8c" startline="32" endline="48">nak_mem__init_heap</references>
        <references refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak_8c" startline="35">NO</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" compoundref="structures_8h" startline="284">NAK::start_of_scope</references>
        <references refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" compoundref="nak_8c" startline="36">YES</references>
        <referencedby refid="aaa_8h_1aeb0e512ce199b7b278cb0a92223ffbe0" compoundref="aaa_8c" startline="406" endline="505">aaa__initialize</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a0816b9c5e8fc3254f65f450d8692bc56" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__set_end_of_scope</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 end)</argsstring>
        <name>nak__set_end_of_scope</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="417" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="417" bodyend="435"/>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" compoundref="nak_8c" startline="165" endline="188">m__add_gap_to_list</references>
        <references refid="callbacks_8h_1a392cf5458c41126c4facb8765a77c71e" compoundref="callbacks_8h" startline="62">w_msg__</references>
        <referencedby refid="s1_8c_1a95d9a2188b7812ce62433ceedd6754a0" compoundref="s1_8c" startline="106" endline="166">m__release_a_metadata_pdu</referencedby>
        <referencedby refid="r2_8h_1a850b0b4e5a78d63fb46f6ce0a5fd0426" compoundref="r2_8c" startline="337" endline="921">r2__state_table</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a1c8e0561faf62519fd25b5965524edba" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__data_sent</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 begin, u_int_4 end)</argsstring>
        <name>nak__data_sent</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="440" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="440" bodyend="450"/>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" compoundref="nak_8c" startline="313" endline="335">m__remove_range_from_list</references>
        <referencedby refid="s1_8c_1a1bf4984d114c50671f7f92457d7f07d9" compoundref="s1_8c" startline="200" endline="227">m__release_a_file_data_pdu</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a38b169f5d212f6bb63bc72c65a04e2e5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__data_received</definition>
        <argsstring>(NAK *nak_ptr, u_int_4 begin, u_int_4 end)</argsstring>
        <name>nak__data_received</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>begin</declname>
        </param>
        <param>
          <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
          <declname>end</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="455" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="455" bodyend="533"/>
        <references refid="cfdp__config_8h_1a848085db8cbbc78a4c21d2ed01271b69" compoundref="cfdp__config_8h" startline="277">ASSERT__BUG_DETECTED</references>
        <references refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" compoundref="utils_8c" startline="508" endline="512">cfdp_is_message_class_enabled</references>
        <references refid="cfdp__provides_8h_1ae127172185349b64e5971dbee9c6f396" compoundref="cfdp__provides_8h" startline="219">CFDP_MSG_DEBUG_NAK</references>
        <references refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" compoundref="callbacks_8h" startline="60">d_msg__</references>
        <references refid="callbacks_8h_1a4ea80b031f7b1097eff43e0bf6756da2" compoundref="callbacks_8h" startline="63">e_msg__</references>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" compoundref="nak_8c" startline="165" endline="188">m__add_gap_to_list</references>
        <references refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" compoundref="nak_8c" startline="313" endline="335">m__remove_range_from_list</references>
        <referencedby refid="r1_8h_1a71b0a6f0b3117235bdcb34c2ac9f0c9b" compoundref="r1_8c" startline="99" endline="485">r1__state_table</referencedby>
        <referencedby refid="r2_8h_1a850b0b4e5a78d63fb46f6ce0a5fd0426" compoundref="r2_8c" startline="337" endline="921">r2__state_table</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1aaf8402ecf3338efa9120d2a299a86ffb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
        <definition>u_int_4 nak__how_many_filedata_gaps</definition>
        <argsstring>(NAK *nak_ptr)</argsstring>
        <name>nak__how_many_filedata_gaps</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="538" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="538" bodyend="552"/>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" compoundref="cfdp__config_8h" startline="59">u_int_4</references>
        <referencedby refid="s1_8c_1a1bf4984d114c50671f7f92457d7f07d9" compoundref="s1_8c" startline="200" endline="227">m__release_a_file_data_pdu</referencedby>
        <referencedby refid="nak_8h_1a7fe68457ee6fb90ded7cf12c191df2be" compoundref="nak_8c" startline="569" endline="628">nak__list_as_string</referencedby>
        <referencedby refid="pdu_8h_1a87fade9585df8703510b7bf4f0d9b93a" compoundref="pdu_8c" startline="747" endline="805">pdu__make_nak_pdu</referencedby>
        <referencedby refid="s1_8h_1a524667af7705adf9738d16163a289a9b" compoundref="s1_8c" startline="237" endline="405">s1__state_table</referencedby>
        <referencedby refid="s2_8h_1ab8cf22449e96aba2a0eba61b08b8e6ab" compoundref="s2_8c" startline="378" endline="842">s2__state_table</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a7e55f0a35604a4e73aa6c179e35521de" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="common__types_8h_1ac3ecf6d00ebd3dd79ea00efdc71d9c33" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">boolean</ref></type>
        <definition>boolean nak__is_list_empty</definition>
        <argsstring>(NAK *nak_ptr)</argsstring>
        <name>nak__is_list_empty</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="557" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="557" bodyend="564"/>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" compoundref="structures_8h" startline="286">NAK::is_metadata_missing</references>
        <references refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak_8c" startline="35">NO</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" compoundref="nak_8c" startline="36">YES</references>
        <referencedby refid="r2_8h_1a850b0b4e5a78d63fb46f6ce0a5fd0426" compoundref="r2_8c" startline="337" endline="921">r2__state_table</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1ae5da8cc43fae8173a85d6d2b2fc9f2cf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char *</type>
        <definition>char* nak__list_as_string</definition>
        <argsstring>(NAK *nak_ptr)</argsstring>
        <name>nak__list_as_string</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="569" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="569" bodyend="628"/>
        <references refid="cfdp__private_8h_1adb530699583bc4f2ea5f59bbc08f5c64" compoundref="cfdp__private_8h" startline="72">APPEND</references>
        <references refid="structgap_1a12391414ff856122bc95438776497cbd" compoundref="structures_8h" startline="138">gap::begin</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" compoundref="structures_8h" startline="286">NAK::is_metadata_missing</references>
        <references refid="nak_8c_1aa3ceda8162f745afb15f7f080646ab17">LONGEST_STRING</references>
        <references refid="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1">LONGEST_SUBSTRING</references>
        <references refid="nak_8c_1aaf8402ecf3338efa9120d2a299a86ffb" compoundref="nak_8c" startline="538" endline="552">nak__how_many_filedata_gaps</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak_8c" startline="35">NO</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" compoundref="structures_8h" startline="284">NAK::start_of_scope</references>
        <references refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" compoundref="nak_8c" startline="36">YES</references>
        <referencedby refid="pdu__as__string_8h_1ae3752a3fafe5c4419aee1570bcde9227" compoundref="pdu__as__string_8c" startline="213" endline="228">nak_struct_as_string</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1ad7508955275728f832bae91dbce452bf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__gaps_as_string</definition>
        <argsstring>(NAK *nak_ptr, char *string, int max_string_length)</argsstring>
        <name>nak__gaps_as_string</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>string</declname>
        </param>
        <param>
          <type>int</type>
          <declname>max_string_length</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="635" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="635" bodyend="670"/>
        <references refid="structgap_1a12391414ff856122bc95438776497cbd" compoundref="structures_8h" startline="138">gap::begin</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1">LONGEST_SUBSTRING</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak_8c" startline="35">NO</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="utils_8c_1a63c00f4c72a6c9c2c151b5f1b03dc603" compoundref="utils_8c" startline="387" endline="421">utils__strncat</references>
        <references refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" compoundref="nak_8c" startline="36">YES</references>
        <referencedby refid="cfdp__provides_8h_1a583af0894efed24501b446da1c709e06" compoundref="utils_8c" startline="771" endline="803">cfdp_transaction_gaps_as_string</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1add3a8f00158d3b1ecf1780c6450ad43b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak__metadata_sent_or_received</definition>
        <argsstring>(NAK *nak_ptr)</argsstring>
        <name>nak__metadata_sent_or_received</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="676" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="676" bodyend="680"/>
        <references refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" compoundref="structures_8h" startline="286">NAK::is_metadata_missing</references>
        <references refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak_8c" startline="35">NO</references>
        <referencedby refid="s2_8c_1a95d9a2188b7812ce62433ceedd6754a0" compoundref="s2_8c" startline="166" endline="234">m__release_a_metadata_pdu</referencedby>
        <referencedby refid="r1_8h_1a71b0a6f0b3117235bdcb34c2ac9f0c9b" compoundref="r1_8c" startline="99" endline="485">r1__state_table</referencedby>
        <referencedby refid="r2_8h_1a850b0b4e5a78d63fb46f6ce0a5fd0426" compoundref="r2_8c" startline="337" endline="921">r2__state_table</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a215e6568779881a32e0671089decbf5c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
        <definition>u_int_4 nak__how_many_bytes_missing</definition>
        <argsstring>(NAK *nak_ptr)</argsstring>
        <name>nak__how_many_bytes_missing</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="685" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="685" bodyend="711"/>
        <references refid="structgap_1a12391414ff856122bc95438776497cbd" compoundref="structures_8h" startline="138">gap::begin</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" compoundref="structures_8h" startline="287">NAK::head</references>
        <references refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" compoundref="structures_8h" startline="140">gap::next</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" compoundref="cfdp__config_8h" startline="59">u_int_4</references>
        <referencedby refid="cfdp__provides_8h_1a734b6b0a02cbf43ddc430562583bb06d" compoundref="utils_8c" startline="697" endline="766">cfdp_transaction_progress</referencedby>
        <referencedby refid="nak_8h_1a9a948bd75629e51e14eecdd6246ba452" compoundref="nak_8c" startline="716" endline="731">nak__how_many_bytes_received</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak_8c_1a9a948bd75629e51e14eecdd6246ba452" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref></type>
        <definition>u_int_4 nak__how_many_bytes_received</definition>
        <argsstring>(NAK *nak_ptr)</argsstring>
        <name>nak__how_many_bytes_received</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak_ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak.c" line="716" column="1" bodyfile="apps/cf/fsw/src/PRI/nak.c" bodystart="716" bodyend="731"/>
        <references refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" compoundref="structures_8h" startline="285">NAK::end_of_scope</references>
        <references refid="nak_8c_1a215e6568779881a32e0671089decbf5c" compoundref="nak_8c" startline="685" endline="711">nak__how_many_bytes_missing</references>
        <references refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" compoundref="structures_8h" startline="284">NAK::start_of_scope</references>
        <references refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" compoundref="cfdp__config_8h" startline="59">u_int_4</references>
        <referencedby refid="cfdp__provides_8h_1a734b6b0a02cbf43ddc430562583bb06d" compoundref="utils_8c" startline="697" endline="766">cfdp_transaction_progress</referencedby>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>FILE:<sp/>nak.c<sp/>--<sp/>Module<sp/>to<sp/>keep<sp/>track<sp/>of<sp/>what<sp/>needs<sp/>to<sp/>be<sp/>Nak-ed.</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/><sp/>Copyright<sp/><sp/>2007-2014<sp/>United<sp/>States<sp/>Government<sp/>as<sp/>represented<sp/>by<sp/>the<sp/></highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/><sp/>Administrator<sp/>of<sp/>the<sp/>National<sp/>Aeronautics<sp/>and<sp/>Space<sp/>Administration.<sp/></highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/>All<sp/>Other<sp/>Rights<sp/>Reserved.<sp/><sp/></highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/><sp/>This<sp/>software<sp/>was<sp/>created<sp/>at<sp/>NASA&apos;s<sp/>Goddard<sp/>Space<sp/>Flight<sp/>Center.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/><sp/>This<sp/>software<sp/>is<sp/>governed<sp/>by<sp/>the<sp/>NASA<sp/>Open<sp/>Source<sp/>Agreement<sp/>and<sp/>may<sp/>be<sp/></highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/><sp/>used,<sp/>distributed<sp/>and<sp/>modified<sp/>only<sp/>pursuant<sp/>to<sp/>the<sp/>terms<sp/>of<sp/>that<sp/></highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/><sp/>agreement.</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>SPECS:<sp/><sp/>nak.h</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>ORIGINAL<sp/>PROGRAMMER:<sp/><sp/>Tim<sp/>Ray<sp/>301-286-0581</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>NOTE:<sp/><sp/>Many<sp/>of<sp/>the<sp/>routines<sp/>use<sp/>a<sp/>pointer<sp/>argument<sp/>called<sp/>&apos;nak_ptr&apos;.</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/><sp/><sp/>The<sp/>use<sp/>of<sp/>that<sp/>argument<sp/>allows<sp/>this<sp/>module<sp/>to<sp/>support<sp/>multiple<sp/></highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/><sp/><sp/>transactions<sp/>(each<sp/>maintaining<sp/>an<sp/>independent<sp/>list<sp/>of<sp/>Naks).</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>CHANGES:</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2007_07_31<sp/>Tim<sp/>Ray<sp/>(TR)</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Official<sp/>release.<sp/><sp/>(see<sp/>pre_release_changes.log<sp/>for<sp/>earlier<sp/>changes)</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2007_11_09<sp/>TR</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Better<sp/>portability.<sp/><sp/>C++<sp/>uses<sp/>&apos;new&apos;<sp/>as<sp/>a<sp/>keyword,<sp/>so<sp/>any<sp/>use<sp/>of</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;new&apos;<sp/>as<sp/>a<sp/>variable<sp/>name<sp/>was<sp/>changed<sp/>to<sp/>&apos;neww&apos;.</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2007_12_06<sp/>TR</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Enhancement.<sp/><sp/>Message-class<sp/>filtering<sp/>can<sp/>now<sp/>be<sp/>changed<sp/>on-the-fly.</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2008_01_02<sp/>TR</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Made<sp/>assertions<sp/>safer<sp/>(avoid<sp/>crashing<sp/>if<sp/>program<sp/>continues).</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2008_03_03<sp/>TR</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Careful.<sp/><sp/>In<sp/>&apos;nak__list_as_string&apos;<sp/>allow<sp/>64<sp/>bytes<sp/>of<sp/>cushion</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/>instead<sp/>of<sp/>32.<sp/><sp/></highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cfdp_8h" kindref="compound">cfdp.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cfdp__private_8h" kindref="compound">cfdp_private.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35" refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NO<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>YES<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42" refid="nak_8c_1a5a7d8cef8598bae9e2830b05b429d20a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a5a7d8cef8598bae9e2830b05b429d20a" kindref="member">m__add_node_to_end_of_list</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>*neww)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>Adds<sp/>the<sp/>given<sp/>node<sp/>to<sp/>the<sp/>end<sp/>of<sp/>the<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>List<sp/>is<sp/>empty;<sp/>this<sp/>new<sp/>node<sp/>will<sp/>be<sp/>the<sp/>head<sp/>(i.e.<sp/>first)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>=<sp/>neww;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Move<sp/>to<sp/>the<sp/>last<sp/>node<sp/>on<sp/>the<sp/>list...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>)</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>...<sp/>and<sp/>attach<sp/>the<sp/>new<sp/>node<sp/>to<sp/>the<sp/>end.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/>neww;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" kindref="member">m__new_node</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>**neww)</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>Attempts<sp/>to<sp/>create<sp/>a<sp/>new<sp/>node.<sp/><sp/>If<sp/>successful,<sp/>the<sp/>node</highlight></codeline>
<codeline lineno="66"><highlight class="comment"><sp/>*<sp/><sp/><sp/>is<sp/>loaded<sp/>with<sp/>the<sp/>given<sp/>begin<sp/>&amp;<sp/>end<sp/>values,<sp/>and<sp/>a<sp/>pointer</highlight></codeline>
<codeline lineno="67"><highlight class="comment"><sp/>*<sp/><sp/><sp/>to<sp/>that<sp/>node<sp/>is<sp/>returned<sp/>(via<sp/>&apos;neww&apos;).<sp/><sp/>If<sp/>unsuccessful,<sp/>&apos;neww&apos;<sp/>is<sp/>null.</highlight></codeline>
<codeline lineno="68"><highlight class="comment"><sp/>*<sp/>NOTE:<sp/><sp/>&apos;nak_ptr&apos;<sp/>is<sp/>an<sp/>input<sp/>parameter<sp/>that<sp/>is<sp/>only<sp/>relevant<sp/>when<sp/>dynamic<sp/></highlight></codeline>
<codeline lineno="69"><highlight class="comment"><sp/>*<sp/><sp/><sp/>allocation<sp/>is<sp/>disabled<sp/>(in<sp/>that<sp/>case,<sp/>&apos;creation&apos;<sp/>is<sp/>different).</highlight></codeline>
<codeline lineno="70"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*node_ptr;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>configured<sp/>to<sp/>do<sp/>so,<sp/>output<sp/>a<sp/>debug<sp/>message<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" kindref="member">cfdp_is_message_class_enabled</ref><sp/>(<ref refid="cfdp__provides_8h_1ae127172185349b64e5971dbee9c6f396" kindref="member">CFDP_MSG_DEBUG_NAK</ref>))</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" kindref="member">d_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;Gap<sp/>added<sp/>(%lu-%lu).\n&quot;</highlight><highlight class="normal">,<sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>node-pointer<sp/>to<sp/>a<sp/>value<sp/>indicating<sp/>failure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*neww<sp/>=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Attempt<sp/>to<sp/>allocate<sp/>memory<sp/>for<sp/>a<sp/>new<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*neww<sp/>=<sp/><ref refid="nak__mem_8c_1aaf9213754508469f0f30a14f5fbcc597" kindref="member">nak_mem__malloc</ref><sp/>(nak_ptr);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*neww<sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Oops.<sp/><sp/>Out<sp/>of<sp/>memory.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Load<sp/>the<sp/>new<sp/>node<sp/>with<sp/>the<sp/>specified<sp/>&apos;begin&apos;<sp/>and<sp/>&apos;end&apos;<sp/>values<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>node_ptr<sp/>=<sp/>*neww;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>node_ptr-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref><sp/>=<sp/>begin;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>node_ptr-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>node_ptr-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98" refid="nak_8c_1aaa802666e5af53eb7278f31bd8012ab0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1aaa802666e5af53eb7278f31bd8012ab0" kindref="member">m__previous</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>*current,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>**previous)</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>Given<sp/>a<sp/>Nak-list<sp/>(&apos;nak&apos;)<sp/>and<sp/>a<sp/>node<sp/>(&apos;current&apos;),<sp/></highlight></codeline>
<codeline lineno="100"><highlight class="comment"><sp/>*<sp/><sp/><sp/>it<sp/>attempts<sp/>to<sp/>locate<sp/>the<sp/>node<sp/>previous<sp/>to<sp/>&apos;current&apos;.<sp/><sp/>If<sp/>successful,</highlight></codeline>
<codeline lineno="101"><highlight class="comment"><sp/>*<sp/><sp/><sp/>&apos;*previous&apos;<sp/>contains<sp/>a<sp/>pointer<sp/>to<sp/>that<sp/>node;<sp/>otherwise,<sp/>&apos;*previous&apos;<sp/>is</highlight></codeline>
<codeline lineno="102"><highlight class="comment"><sp/>*<sp/><sp/><sp/>null.</highlight></codeline>
<codeline lineno="103"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>&apos;*previous&apos;<sp/>to<sp/>indicate<sp/>failure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*previous<sp/>=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(current<sp/>==<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>)</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>There<sp/>is<sp/>no<sp/>&apos;previous&apos;<sp/>node<sp/>for<sp/>the<sp/>list-head<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Walk<sp/>through<sp/>the<sp/>list,<sp/>looking<sp/>for<sp/>a<sp/>node<sp/>which<sp/>points<sp/>to<sp/>the<sp/></highlight></codeline>
<codeline lineno="116"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>given<sp/>node.</highlight></codeline>
<codeline lineno="117"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>)</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>==<sp/>current)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>We<sp/>found<sp/>it.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Validate<sp/>that<sp/>the<sp/>given<sp/>node<sp/>was<sp/>on<sp/>the<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" kindref="member">ASSERT__</ref><sp/>(p<sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Return<sp/>the<sp/>result.<sp/><sp/>If<sp/>the<sp/>walk<sp/>completed<sp/>without<sp/>finding<sp/>the</highlight></codeline>
<codeline lineno="127"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>node<sp/>(assertion<sp/>fired)<sp/>the<sp/>result<sp/>will<sp/>be<sp/>NULL,<sp/>which</highlight></codeline>
<codeline lineno="128"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>is<sp/>the<sp/>best<sp/>answer<sp/>we<sp/>can<sp/>give.</highlight></codeline>
<codeline lineno="129"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>*previous<sp/>=<sp/>p;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136" refid="nak_8c_1af6dddc5bbfe6fb426bbb30b4c6111d13" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1af6dddc5bbfe6fb426bbb30b4c6111d13" kindref="member">m__incorporate_gap</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>To<sp/>avoid<sp/>&apos;losing&apos;<sp/>the<sp/>knowledge<sp/>of<sp/>this<sp/>gap<sp/>forever,</highlight></codeline>
<codeline lineno="138"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>extend<sp/>the<sp/>end-point<sp/>of<sp/>the<sp/>last<sp/>gap<sp/>to<sp/>include<sp/>this<sp/>one.</highlight></codeline>
<codeline lineno="139"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>On<sp/>the<sp/>bad<sp/>side,<sp/>this<sp/>results<sp/>in<sp/>retransmission<sp/>of<sp/>data<sp/>that</highlight></codeline>
<codeline lineno="140"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>was<sp/>already<sp/>received.<sp/><sp/>On<sp/>the<sp/>good<sp/>side,<sp/>the<sp/>transaction<sp/>is<sp/>able</highlight></codeline>
<codeline lineno="141"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>to<sp/>complete<sp/>successfully,<sp/>because<sp/>all<sp/>data<sp/>gaps<sp/>are<sp/>remembered.</highlight></codeline>
<codeline lineno="142"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="143"><highlight class="normal">{</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><ref refid="structgap" kindref="compound">GAP</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Before<sp/>doing<sp/>anything,<sp/>validate<sp/>the<sp/>input<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><ref refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" kindref="member">ASSERT__</ref><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>);</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Avoid<sp/>crashing<sp/>if<sp/>engine<sp/>user<sp/>continues<sp/>after<sp/>assertion<sp/>fires<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Move<sp/>to<sp/>the<sp/>last<sp/>node<sp/>(gap)<sp/>on<sp/>the<sp/>given<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>)</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(end<sp/>&gt;<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>)</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Extend<sp/>the<sp/>scope<sp/>of<sp/>this<sp/>Nak<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="160"><highlight class="normal">}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165" refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" kindref="member">m__add_gap_to_list</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>Either<sp/>adds<sp/>a<sp/>new<sp/>node<sp/>to<sp/>the<sp/>end<sp/>of<sp/>the<sp/>list<sp/>(containing</highlight></codeline>
<codeline lineno="167"><highlight class="comment"><sp/>*<sp/><sp/><sp/>the<sp/>specified<sp/>gap),<sp/>or<sp/>adds<sp/>the<sp/>specified<sp/>gap<sp/>to<sp/>the<sp/>existing<sp/>node</highlight></codeline>
<codeline lineno="168"><highlight class="comment"><sp/>*<sp/><sp/><sp/>at<sp/>the<sp/>end<sp/>of<sp/>the<sp/>list.<sp/><sp/></highlight></codeline>
<codeline lineno="169"><highlight class="comment"><sp/>*<sp/>INPUTS:<sp/><sp/>&apos;begin&apos;<sp/>and<sp/>&apos;end&apos;<sp/>specify<sp/>the<sp/>gap.<sp/><sp/>&apos;nak_ptr&apos;<sp/>provides<sp/>the</highlight></codeline>
<codeline lineno="170"><highlight class="comment"><sp/>*<sp/><sp/><sp/>current<sp/>linked-list<sp/>of<sp/>gaps.</highlight></codeline>
<codeline lineno="171"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal">{</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*new_node_ptr;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Attempt<sp/>to<sp/>create<sp/>a<sp/>new<sp/>node<sp/>containing<sp/>the<sp/>given<sp/>range<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><ref refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" kindref="member">m__new_node</ref><sp/>(nak_ptr,<sp/>begin,<sp/>end,<sp/>&amp;new_node_ptr);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>successful,<sp/>add<sp/>the<sp/>new<sp/>node<sp/>to<sp/>the<sp/>list.<sp/><sp/>Otherwise,<sp/>incorporate</highlight></codeline>
<codeline lineno="180"><highlight class="comment"><sp/><sp/><sp/>*<sp/>this<sp/>new<sp/>gap<sp/>without<sp/>adding<sp/>a<sp/>new<sp/>node<sp/>(i.e.<sp/>make<sp/>the<sp/>best<sp/>of<sp/>a<sp/>bad</highlight></codeline>
<codeline lineno="181"><highlight class="comment"><sp/><sp/><sp/>*<sp/>situation).</highlight></codeline>
<codeline lineno="182"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(new_node_ptr<sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nak_8c_1a5a7d8cef8598bae9e2830b05b429d20a" kindref="member">m__add_node_to_end_of_list</ref><sp/>(nak_ptr,<sp/>new_node_ptr);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Oops.<sp/><sp/>Out<sp/>of<sp/>memory.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nak_8c_1af6dddc5bbfe6fb426bbb30b4c6111d13" kindref="member">m__incorporate_gap</ref><sp/>(nak_ptr,<sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="188"><highlight class="normal">}</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193" refid="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" kindref="member">m__remove_node</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>*obsolete)</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>Removes<sp/>the<sp/>given<sp/>node<sp/>from<sp/>the<sp/>given<sp/>nak-list.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*node_before_obsolete;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(The<sp/>nak-list<sp/>should<sp/>never<sp/>be<sp/>empty<sp/>at<sp/>this<sp/>point)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" kindref="member">ASSERT__</ref><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Avoid<sp/>crashing<sp/>if<sp/>engine<sp/>user<sp/>continues<sp/>after<sp/>assertion<sp/>fires<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(obsolete<sp/>==<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>)</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>node<sp/>from<sp/>front<sp/>of<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>=<sp/>obsolete-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak__mem_8c_1aa082478453d5bb8b451ce6600d742797" kindref="member">nak_mem__free</ref><sp/>(nak_ptr,<sp/>obsolete);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>node<sp/>from<sp/>interior/end<sp/>of<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Find<sp/>the<sp/>node<sp/>that<sp/>is<sp/>previous<sp/>to<sp/>the<sp/>obsolete<sp/>node,<sp/></highlight></codeline>
<codeline lineno="216"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>and<sp/>have<sp/>that<sp/>node<sp/>point<sp/>around<sp/>the<sp/>obsolete<sp/>node<sp/>(so<sp/>that<sp/>all</highlight></codeline>
<codeline lineno="217"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>nodes<sp/>are<sp/>still<sp/>linked<sp/>together).</highlight></codeline>
<codeline lineno="218"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Then<sp/>the<sp/>obsolete<sp/>node<sp/>can<sp/>be<sp/>deleted<sp/>safely.</highlight></codeline>
<codeline lineno="219"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1aaa802666e5af53eb7278f31bd8012ab0" kindref="member">m__previous</ref><sp/>(nak_ptr,<sp/>obsolete,<sp/>&amp;node_before_obsolete);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1af5822b84946d824c15c38ab09085b5eb" kindref="member">ASSERT__</ref><sp/>(node_before_obsolete<sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(node_before_obsolete<sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Avoid<sp/>crashing<sp/>if<sp/>engine<sp/>user<sp/>continues<sp/>after<sp/>assertion<sp/>fires<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_before_obsolete-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/>obsolete-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak__mem_8c_1aa082478453d5bb8b451ce6600d742797" kindref="member">nak_mem__free</ref><sp/>(nak_ptr,<sp/>obsolete);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233" refid="nak_8c_1a17224efd244e12bae6763ff15b88e48b" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a17224efd244e12bae6763ff15b88e48b" kindref="member">m__remove_range_from_node</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>*p,<sp/></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>It<sp/>removes<sp/>the<sp/>given<sp/>range<sp/>(&apos;begin&apos;<sp/>through<sp/>&apos;end&apos;)<sp/>from<sp/></highlight></codeline>
<codeline lineno="236"><highlight class="comment"><sp/>*<sp/><sp/><sp/>the<sp/>given<sp/>node<sp/>(presumed<sp/>to<sp/>be<sp/>within<sp/>the<sp/>given<sp/>nak-list).</highlight></codeline>
<codeline lineno="237"><highlight class="comment"><sp/>*<sp/>NOTE:<sp/><sp/>Any<sp/>range<sp/>is<sp/>acceptable<sp/>(i.e.<sp/>if<sp/>the<sp/>range<sp/>does<sp/>not<sp/>overlap<sp/>the</highlight></codeline>
<codeline lineno="238"><highlight class="comment"><sp/>*<sp/><sp/><sp/>node&apos;s<sp/>range,<sp/>then<sp/>no<sp/>action<sp/>is<sp/>taken).</highlight></codeline>
<codeline lineno="239"><highlight class="comment"><sp/>*<sp/>NOTE:<sp/><sp/>If<sp/>it<sp/>is<sp/>necessary<sp/>to<sp/>delete<sp/>the<sp/>node,<sp/>then<sp/>the<sp/>given<sp/>nak-list</highlight></codeline>
<codeline lineno="240"><highlight class="comment"><sp/>*<sp/><sp/><sp/>will<sp/>be<sp/>modified.</highlight></codeline>
<codeline lineno="241"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*new_node_ptr;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>configured<sp/>to<sp/>do<sp/>so,<sp/>output<sp/>a<sp/>debug<sp/>message<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" kindref="member">cfdp_is_message_class_enabled</ref><sp/>(<ref refid="cfdp__provides_8h_1ae127172185349b64e5971dbee9c6f396" kindref="member">CFDP_MSG_DEBUG_NAK</ref>))</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" kindref="member">d_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;Removing<sp/>range<sp/>(%lu-%lu)<sp/>from<sp/>node<sp/>(%lu-%lu).\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>begin,<sp/>end,<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>,<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>);</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Example<sp/>of<sp/>case<sp/>1:<sp/><sp/>node<sp/>contains<sp/>100-200,<sp/>begin=100,<sp/>end=200<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((begin<sp/>&lt;=<sp/>p-&gt;begin)<sp/>&amp;&amp;<sp/>(end<sp/>&gt;=<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>))</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>range<sp/>overlaps<sp/>the<sp/>entire<sp/>node;<sp/>remove<sp/>node<sp/>from<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" kindref="member">m__remove_node</ref><sp/>(nak_ptr,<sp/>p);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Example<sp/>of<sp/>case<sp/>2:<sp/><sp/>node<sp/>contains<sp/>100-200,<sp/>begin=300,<sp/>end=400<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((end<sp/>&lt;=<sp/>p-&gt;begin)<sp/>||<sp/>(begin<sp/>&gt;=<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>))</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>range<sp/>does<sp/>not<sp/>overlap<sp/>the<sp/>node<sp/>at<sp/>all;<sp/>no<sp/>action<sp/>needed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Example<sp/>of<sp/>case<sp/>3:<sp/><sp/>node<sp/>contains<sp/>100-200,<sp/>begin=50,<sp/>end=150<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((begin<sp/>&lt;=<sp/>p-&gt;begin)<sp/>&amp;&amp;<sp/>(end<sp/>&gt;<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>))</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>range<sp/>overlaps<sp/>a<sp/>front<sp/>portion<sp/>of<sp/>the<sp/>node;<sp/>shorten<sp/>the<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Example<sp/>of<sp/>case<sp/>4:<sp/><sp/>node<sp/>contains<sp/>100-200,<sp/>begin=150,<sp/>end=250<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((begin<sp/>&lt;<sp/>p-&gt;end)<sp/>&amp;&amp;<sp/>(end<sp/>&gt;=p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>))</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>range<sp/>overlaps<sp/>a<sp/>rear<sp/>portion<sp/>of<sp/>the<sp/>node;<sp/>shorten<sp/>the<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>=<sp/>begin;</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Example<sp/>of<sp/>case<sp/>5:<sp/><sp/>node<sp/>contains<sp/>100-200,<sp/>begin=125,<sp/>end=175.</highlight></codeline>
<codeline lineno="272"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Single<sp/>gap<sp/>of<sp/>100-200<sp/>is<sp/>replaced<sp/>with<sp/>two<sp/>gaps:<sp/>100-125<sp/>and<sp/>175-200.</highlight></codeline>
<codeline lineno="273"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((begin<sp/>&gt;<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>)<sp/>&amp;&amp;<sp/>(end<sp/>&lt;<sp/>p-&gt;end))</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>range<sp/>overlaps<sp/>an<sp/>interior<sp/>portion<sp/>of<sp/>the<sp/>node,<sp/>but<sp/>does<sp/>not</highlight></codeline>
<codeline lineno="276"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>overlap<sp/>the<sp/>beginning<sp/>or<sp/>end.<sp/><sp/>Break<sp/>the<sp/>single<sp/>node<sp/>into<sp/>2<sp/>nodes.</highlight></codeline>
<codeline lineno="277"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>a<sp/>new<sp/>node<sp/>and<sp/>put<sp/>the<sp/>remaining<sp/>&quot;rear&quot;<sp/>portion<sp/>into<sp/>it<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" kindref="member">m__new_node</ref><sp/>(nak_ptr,<sp/>end,<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>,<sp/>&amp;new_node_ptr);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(new_node_ptr<sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Oops.<sp/><sp/>Out<sp/>of<sp/>memory.<sp/><sp/>Leave<sp/>nak<sp/>as-is.<sp/></highlight></codeline>
<codeline lineno="283"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>There<sp/>is<sp/>some<sp/>loss<sp/>of<sp/>efficiency<sp/>(due<sp/>to<sp/>unnecessary<sp/>retrans</highlight></codeline>
<codeline lineno="284"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>by<sp/>the<sp/>Sender),<sp/>but<sp/>the<sp/>transaction<sp/>will<sp/>be<sp/>able<sp/>to<sp/>complete</highlight></codeline>
<codeline lineno="285"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>successfully<sp/>(because<sp/>no<sp/>data<sp/>gap<sp/>has<sp/>been<sp/>&apos;forgotten&apos;).</highlight></codeline>
<codeline lineno="286"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Modify<sp/>original<sp/>node<sp/>to<sp/>leave<sp/>only<sp/>the<sp/>remaining<sp/>&quot;front&quot;<sp/>portion<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>=<sp/>begin;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Adjust<sp/>&apos;next&apos;<sp/>pointers<sp/>so<sp/>as<sp/>to<sp/>insert<sp/>the<sp/>new<sp/>node<sp/>after<sp/>the</highlight></codeline>
<codeline lineno="291"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>current<sp/>node.</highlight></codeline>
<codeline lineno="292"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_node_ptr-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/>p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/>new_node_ptr;</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>code<sp/>should<sp/>never<sp/>be<sp/>reached<sp/></highlight></codeline>
<codeline lineno="299"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>(unless<sp/>the<sp/>other<sp/>&quot;if&quot;<sp/>cases<sp/>above<sp/>don&apos;t<sp/>cover<sp/>all<sp/>possibilities).</highlight></codeline>
<codeline lineno="300"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>If<sp/>this<sp/>code<sp/>is<sp/>reached,<sp/>report<sp/>the<sp/>bug.</highlight></codeline>
<codeline lineno="301"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>If<sp/>the<sp/>assertion<sp/>routine<sp/>allows<sp/>the<sp/>program<sp/>to<sp/>continue,</highlight></codeline>
<codeline lineno="302"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>abort<sp/>the<sp/>routine.</highlight></codeline>
<codeline lineno="303"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1a848085db8cbbc78a4c21d2ed01271b69" kindref="member">ASSERT__BUG_DETECTED</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313" refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" kindref="member">m__remove_range_from_list</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>WHAT<sp/>IT<sp/>DOES:<sp/><sp/>Removes<sp/>the<sp/>specified<sp/>range<sp/>from<sp/>the<sp/>given<sp/>list</highlight></codeline>
<codeline lineno="316"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>of<sp/>gaps.</highlight></codeline>
<codeline lineno="317"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal">{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*whos_next;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Walk<sp/>through<sp/>the<sp/>given<sp/>list,<sp/>removing<sp/>the<sp/>specified<sp/>range<sp/>from</highlight></codeline>
<codeline lineno="324"><highlight class="comment"><sp/><sp/><sp/>*<sp/>each<sp/>node<sp/>on<sp/>the<sp/>list.</highlight></codeline>
<codeline lineno="325"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=whos_next)</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Note<sp/>that<sp/>the<sp/>use<sp/>of<sp/>&quot;whos_next&quot;<sp/>avoids<sp/>a<sp/>core<sp/>dump<sp/>in<sp/>the</highlight></codeline>
<codeline lineno="328"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>event<sp/>that<sp/>the<sp/>current<sp/>node<sp/>gets<sp/>deleted<sp/>inside<sp/></highlight></codeline>
<codeline lineno="329"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>&apos;m__remove_range_from_node&apos;.<sp/><sp/>(p-&gt;next<sp/>is<sp/>blown<sp/>away!)</highlight></codeline>
<codeline lineno="330"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>whos_next<sp/>=<sp/>p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1a17224efd244e12bae6763ff15b88e48b" kindref="member">m__remove_range_from_node</ref><sp/>(nak_ptr,<sp/>p,<sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="335"><highlight class="normal">}</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="340" refid="nak_8h_1ae0aedd64d02087c790f57bb58e0f7cdc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1ae0aedd64d02087c790f57bb58e0f7cdc" kindref="member">nak__copy_nak</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*dest_ptr,<sp/><ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*src_ptr)</highlight></codeline>
<codeline lineno="341"><highlight class="normal">{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" kindref="member">start_of_scope</ref><sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" kindref="member">start_of_scope</ref>;</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref><sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref>;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>In<sp/>the<sp/>static<sp/>allocation<sp/>version,<sp/>an<sp/>array<sp/>is<sp/>made<sp/>to<sp/>look<sp/>like<sp/>a</highlight></codeline>
<codeline lineno="354"><highlight class="comment"><sp/><sp/><sp/>*<sp/>linked<sp/>list.<sp/><sp/>Therefore,<sp/>all<sp/>the<sp/>pointers<sp/>(inside<sp/>each<sp/>node<sp/>on<sp/>the<sp/>list!)</highlight></codeline>
<codeline lineno="355"><highlight class="comment"><sp/><sp/><sp/>*<sp/>will<sp/>have<sp/>to<sp/>be<sp/>adjusted<sp/>(so<sp/>that<sp/>they<sp/>point<sp/>to<sp/>memory<sp/>locations<sp/></highlight></codeline>
<codeline lineno="356"><highlight class="comment"><sp/><sp/><sp/>*<sp/>within<sp/>the<sp/>destination<sp/>array<sp/>rather<sp/>than<sp/>within<sp/>the<sp/>source<sp/>array).<sp/><sp/></highlight></codeline>
<codeline lineno="357"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Step<sp/>one:<sp/><sp/>copy<sp/>the<sp/>arrays<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=0;<sp/>i&lt;<ref refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" kindref="member">MAX_GAPS_PER_TRANSACTION</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i]<sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i];</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i]<sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i];</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Step<sp/>two:<sp/><sp/>adjust<sp/>the<sp/>pointers<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(src_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>-<sp/>&amp;src_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[0]<sp/>+<sp/>&amp;dest_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[0];</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=0;<sp/>i&lt;<ref refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" kindref="member">MAX_GAPS_PER_TRANSACTION</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(src_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i].<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i].<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i].<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>=<sp/></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i].<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>-<sp/>&amp;src_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[0]<sp/>+<sp/>&amp;dest_ptr-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[0];</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="379"><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>In<sp/>the<sp/>dynamic<sp/>allocation<sp/>version,<sp/>the<sp/>linked<sp/>list<sp/>doesn&apos;t<sp/>move;</highlight></codeline>
<codeline lineno="382"><highlight class="comment"><sp/><sp/><sp/>*<sp/>we<sp/>just<sp/>have<sp/>to<sp/>make<sp/>sure<sp/>we<sp/>point<sp/>to<sp/>the<sp/>head<sp/>of<sp/>the<sp/>list.</highlight></codeline>
<codeline lineno="383"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/>dest_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>=<sp/>src_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392" refid="nak_8h_1a75559ed69d551bae8df5c28783c96840" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a3e3ace1ad5fe5553cee03be1c43ce7d2" kindref="member">nak__init</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sender_or_receiver)</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>scope<sp/>to<sp/>be<sp/>&quot;empty&quot;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" kindref="member">start_of_scope</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>gap-list<sp/>to<sp/>be<sp/>empty<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="nak__mem_8c_1a66dbd4aaa7e98eb8833cb8816a9751c0" kindref="member">nak_mem__init_heap</ref><sp/>(nak_ptr);</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>caller<sp/>is<sp/>a<sp/>Receiver,<sp/>add<sp/>one<sp/>node<sp/>to<sp/>the<sp/>list<sp/>to<sp/>indicate</highlight></codeline>
<codeline lineno="405"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>that<sp/>Metadata<sp/>has<sp/>not<sp/>been<sp/>received<sp/>(note<sp/>that<sp/>CFDP<sp/>represents</highlight></codeline>
<codeline lineno="406"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Metadata<sp/>as<sp/>data<sp/>range<sp/>0-0).</highlight></codeline>
<codeline lineno="407"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sender_or_receiver<sp/>==<sp/><ref refid="nak_8h_1a741c56f36f51042ec7d2908b17fec458" kindref="member">I_AM_A_RECEIVER</ref>)</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref><sp/>=<sp/><ref refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" kindref="member">YES</ref>;</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref><sp/>=<sp/><ref refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>;</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="413"><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="417" refid="nak_8h_1a0816b9c5e8fc3254f65f450d8692bc56" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a0816b9c5e8fc3254f65f450d8692bc56" kindref="member">nak__set_end_of_scope</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="418"><highlight class="normal">{</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Validate<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(end<sp/>&lt;<sp/>nak_ptr-&gt;end_of_scope)</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1a392cf5458c41126c4facb8765a77c71e" kindref="member">w_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;cfdp_engine:<sp/>Nak<sp/>module<sp/>accepted<sp/>request<sp/>to<sp/>set<sp/>&apos;scope&apos;<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;smaller<sp/>(%lu-&gt;%lu)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>,<sp/>end);</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>current<sp/>scope<sp/>has<sp/>been<sp/>extended,<sp/>then<sp/>a<sp/>gap<sp/>has<sp/>been<sp/>introduced</highlight></codeline>
<codeline lineno="428"><highlight class="comment"><sp/><sp/><sp/>*<sp/>(between<sp/>the<sp/>current<sp/>end-of-scope<sp/>and<sp/>the<sp/>new<sp/>end-of-scope);<sp/>add<sp/>this</highlight></codeline>
<codeline lineno="429"><highlight class="comment"><sp/><sp/><sp/>*<sp/>new<sp/>gap<sp/>to<sp/>the<sp/>list.</highlight></codeline>
<codeline lineno="430"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(end<sp/>&gt;<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>)</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" kindref="member">m__add_gap_to_list</ref><sp/>(nak_ptr,<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>,<sp/>end);</highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="435"><highlight class="normal">}</highlight></codeline>
<codeline lineno="436"><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440" refid="nak_8h_1a1c8e0561faf62519fd25b5965524edba" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a1c8e0561faf62519fd25b5965524edba" kindref="member">nak__data_sent</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="441"><highlight class="normal">{</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>this<sp/>data-range<sp/>from<sp/>the<sp/>gap-list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><ref refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" kindref="member">m__remove_range_from_list</ref><sp/>(nak_ptr,<sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>appropriate,<sp/>extend<sp/>the<sp/>current<sp/>scope<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(begin<sp/>==<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>)</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="450"><highlight class="normal">}</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"></highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="455" refid="nak_8h_1a38b169f5d212f6bb63bc72c65a04e2e5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a38b169f5d212f6bb63bc72c65a04e2e5" kindref="member">nak__data_received</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>begin,<sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/>end)</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ALGORITHM:<sp/><sp/>The<sp/>given<sp/>data-range<sp/>(begin-end)<sp/>must<sp/>fit<sp/>one<sp/>of<sp/>the<sp/>four<sp/></highlight></codeline>
<codeline lineno="457"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>cases<sp/>below.<sp/><sp/>Determine<sp/>which<sp/>case<sp/>applies,<sp/>and<sp/>perform<sp/>the<sp/></highlight></codeline>
<codeline lineno="458"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/><sp/>corresponding<sp/>action(s).</highlight></codeline>
<codeline lineno="459"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>ASSUMPTION:<sp/><sp/>The<sp/>scope<sp/>always<sp/>starts<sp/>at<sp/>zero.</highlight></codeline>
<codeline lineno="460"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal">{</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Validate<sp/>the<sp/>given<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((begin<sp/>&lt;<sp/>0)<sp/>||<sp/>(end<sp/>&lt;<sp/>0)<sp/>||<sp/>(begin<sp/>&gt;<sp/>end))</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1a4ea80b031f7b1097eff43e0bf6756da2" kindref="member">e_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;cfdp_engine:<sp/>Nak<sp/>module<sp/>ignored<sp/>receipt<sp/>of<sp/>Filedata<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;with<sp/>invalid<sp/>range<sp/>(%lu-%lu)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>configured<sp/>to<sp/>do<sp/>so,<sp/>output<sp/>a<sp/>debug<sp/>message<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" kindref="member">cfdp_is_message_class_enabled</ref><sp/>(<ref refid="cfdp__provides_8h_1ae127172185349b64e5971dbee9c6f396" kindref="member">CFDP_MSG_DEBUG_NAK</ref>))</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" kindref="member">d_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;Valid_filedata_received:<sp/>%lu-%lu.\n&quot;</highlight><highlight class="normal">,<sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*--------------------------------------------------------------</highlight></codeline>
<codeline lineno="480"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Case<sp/>1<sp/>--<sp/>the<sp/>given<sp/>range<sp/>is<sp/>fully<sp/>within<sp/>the<sp/>current<sp/>scope.</highlight></codeline>
<codeline lineno="481"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Action:<sp/>the<sp/>scope<sp/>doesn&apos;t<sp/>change;<sp/>just<sp/>remove<sp/>the<sp/>given<sp/>range</highlight></codeline>
<codeline lineno="482"><highlight class="comment"><sp/><sp/><sp/>*<sp/>from<sp/>the<sp/>current<sp/>gap-list.</highlight></codeline>
<codeline lineno="483"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Example:<sp/><sp/>scope=0-1000,<sp/>range=100-200.<sp/><sp/></highlight></codeline>
<codeline lineno="484"><highlight class="comment"><sp/><sp/><sp/>*--------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"></highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(end<sp/>&lt;=<sp/>nak_ptr-&gt;end_of_scope)</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" kindref="member">m__remove_range_from_list</ref><sp/>(nak_ptr,<sp/>begin,<sp/>end);</highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------------------</highlight></codeline>
<codeline lineno="490"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Case<sp/>2<sp/>--<sp/>the<sp/>given<sp/>range<sp/>is<sp/>both<sp/>inside<sp/>and<sp/>outside<sp/>the<sp/>current<sp/>scope.</highlight></codeline>
<codeline lineno="491"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Action:<sp/><sp/>The<sp/>scope<sp/>has<sp/>to<sp/>be<sp/>extended,<sp/>and<sp/>the<sp/>portion<sp/>of<sp/>the<sp/>given</highlight></codeline>
<codeline lineno="492"><highlight class="comment"><sp/><sp/><sp/>*<sp/>range<sp/>that<sp/>is<sp/>within<sp/>the<sp/>current<sp/>scope<sp/>has<sp/>to<sp/>be<sp/>removed<sp/>from<sp/>the</highlight></codeline>
<codeline lineno="493"><highlight class="comment"><sp/><sp/><sp/>*<sp/>current<sp/>gap-list.</highlight></codeline>
<codeline lineno="494"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Example:<sp/><sp/>scope=0-1000,<sp/>range=900-1100.<sp/><sp/>New<sp/>scope<sp/>is<sp/>0-1100,</highlight></codeline>
<codeline lineno="495"><highlight class="comment"><sp/><sp/><sp/>*<sp/>and<sp/>the<sp/>range<sp/>900-1000<sp/>is<sp/>removed<sp/>from<sp/>gap-list.</highlight></codeline>
<codeline lineno="496"><highlight class="comment"><sp/><sp/><sp/>*------------------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((begin<sp/>&lt;<sp/>nak_ptr-&gt;end_of_scope)<sp/>&amp;&amp;<sp/>(end<sp/>&gt;<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>))</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1ae4c781b3f03d92595b7b918f13a5d3cd" kindref="member">m__remove_range_from_list</ref><sp/>(nak_ptr,<sp/>begin,<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>);</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="503"><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*-----------------------------------------------------------------</highlight></codeline>
<codeline lineno="505"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Case<sp/>3<sp/>--<sp/>the<sp/>given<sp/>range<sp/>begins<sp/>at<sp/>the<sp/>current<sp/>scope<sp/>boundary</highlight></codeline>
<codeline lineno="506"><highlight class="comment"><sp/><sp/><sp/>*<sp/>(i.e.<sp/>there<sp/>is<sp/>no<sp/>gap<sp/>between<sp/>this<sp/>new<sp/>data<sp/>and<sp/>previously-received</highlight></codeline>
<codeline lineno="507"><highlight class="comment"><sp/><sp/><sp/>*<sp/>data).<sp/><sp/></highlight></codeline>
<codeline lineno="508"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Action:<sp/><sp/>Just<sp/>extend<sp/>the<sp/>current<sp/>scope.</highlight></codeline>
<codeline lineno="509"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Example:<sp/><sp/>scope=0-1000,<sp/>range=1000-1100.<sp/><sp/>New<sp/>scope<sp/>is<sp/>0-1100.</highlight></codeline>
<codeline lineno="510"><highlight class="comment"><sp/><sp/><sp/>*-----------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(begin<sp/>==<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>)</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*----------------------------------------------------------------------</highlight></codeline>
<codeline lineno="516"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Case<sp/>4<sp/>--<sp/>the<sp/>given<sp/>range<sp/>is<sp/>completely<sp/>outside<sp/>the<sp/>current<sp/>scope;</highlight></codeline>
<codeline lineno="517"><highlight class="comment"><sp/><sp/><sp/>*<sp/>i.e.<sp/>there<sp/>is<sp/>a<sp/>gap<sp/>between<sp/>the<sp/>end<sp/>of<sp/>any<sp/>previously-received</highlight></codeline>
<codeline lineno="518"><highlight class="comment"><sp/><sp/><sp/>*<sp/>data<sp/>and<sp/>the<sp/>start<sp/>of<sp/>this<sp/>new<sp/>data.<sp/><sp/></highlight></codeline>
<codeline lineno="519"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Action:<sp/><sp/>Add<sp/>the<sp/>new<sp/>gap<sp/>to<sp/>the<sp/>list,<sp/>and<sp/>extend<sp/>the<sp/>current<sp/>scope.</highlight></codeline>
<codeline lineno="520"><highlight class="comment"><sp/><sp/><sp/>*<sp/>Example:<sp/><sp/>scope=0-1000,<sp/>range=1100-1200.<sp/><sp/>New<sp/>scope<sp/>is<sp/>0-1200,<sp/>and</highlight></codeline>
<codeline lineno="521"><highlight class="comment"><sp/><sp/><sp/>*<sp/>a<sp/>gap<sp/>from<sp/>1000-1100<sp/>is<sp/>added<sp/>to<sp/>the<sp/>gap-list.</highlight></codeline>
<codeline lineno="522"><highlight class="comment"><sp/><sp/><sp/>*----------------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(begin<sp/>&gt;<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>)</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1aaa1746e0b84e9efb1f8c8c28fea82643" kindref="member">m__add_gap_to_list</ref><sp/>(nak_ptr,<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>,<sp/>begin);</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>=<sp/>end;</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>got<sp/>here,<sp/>then<sp/>there<sp/>is<sp/>a<sp/>bug<sp/>in<sp/>the<sp/>above<sp/>code<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1a848085db8cbbc78a4c21d2ed01271b69" kindref="member">ASSERT__BUG_DETECTED</ref>;</highlight></codeline>
<codeline lineno="533"><highlight class="normal">}</highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="538" refid="nak_8h_1a940aa015eb74b564c11ea468c90c51eb" refkind="member"><highlight class="normal"><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><ref refid="nak_8c_1aaf8402ecf3338efa9120d2a299a86ffb" kindref="member">nak__how_many_filedata_gaps</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr)</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>how_many_gaps;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Each<sp/>node<sp/>on<sp/>the<sp/>given<sp/>list<sp/>contains<sp/>one<sp/>gap,<sp/>so<sp/>simply<sp/>count</highlight></codeline>
<codeline lineno="545"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>how<sp/>many<sp/>nodes<sp/>are<sp/>on<sp/>the<sp/>list.</highlight></codeline>
<codeline lineno="546"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>how_many_gaps<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>)</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>how_many_gaps<sp/>++;</highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(how_many_gaps);</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="553"><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight></codeline>
<codeline lineno="555"><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="557" refid="nak_8h_1a4615783cb78ba2f77e5821db1d3bb9c6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1a7e55f0a35604a4e73aa6c179e35521de" kindref="member">nak__is_list_empty</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr)</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((nak_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref>)<sp/>||<sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>))</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>);</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" kindref="member">YES</ref>);</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="565"><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="569" refid="nak_8h_1a7fe68457ee6fb90ded7cf12c191df2be" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="nak_8c_1ae5da8cc43fae8173a85d6d2b2fc9f2cf" kindref="member">nak__list_as_string</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr)</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LONGEST_STRING<sp/>256</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LONGEST_SUBSTRING<sp/>32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out_of_room<sp/>=<sp/><ref refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>;</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>[<ref refid="nak_8c_1aa3ceda8162f745afb15f7f080646ab17" kindref="member">LONGEST_STRING</ref>];</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substring<sp/>[<ref refid="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1" kindref="member">LONGEST_SUBSTRING</ref>];</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Include<sp/>the<sp/>scope<sp/>of<sp/>the<sp/>Nak<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>sprintf<sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;(%lu-%lu)&quot;</highlight><highlight class="normal">,<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" kindref="member">start_of_scope</ref>,<sp/></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref>);</highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Include<sp/>whether<sp/>or<sp/>not<sp/>Metadata<sp/>is<sp/>missing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref>)</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__private_8h_1adb530699583bc4f2ea5f59bbc08f5c64" kindref="member">APPEND</ref><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>Metadata&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Include<sp/>as<sp/>many<sp/>File-data<sp/>gaps<sp/>as<sp/>will<sp/>fit<sp/>in<sp/>the<sp/>string<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>)</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!out_of_room)</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(strlen(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">)<sp/>+<sp/><ref refid="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1" kindref="member">LONGEST_SUBSTRING</ref><sp/>+<sp/>64<sp/>&gt;=<sp/><ref refid="nak_8c_1aa3ceda8162f745afb15f7f080646ab17" kindref="member">LONGEST_STRING</ref>)</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Careful.<sp/><sp/>We<sp/>are<sp/>in<sp/>danger<sp/>of<sp/>writing<sp/>past<sp/>the<sp/>end<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="595"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>allotted<sp/>memory<sp/>for<sp/>&apos;string&apos;<sp/>(i.e.<sp/>we<sp/>are<sp/>out<sp/>of<sp/>room).</highlight></codeline>
<codeline lineno="596"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>We&apos;ll<sp/>have<sp/>to<sp/>skip<sp/>some<sp/>gaps.</highlight></codeline>
<codeline lineno="597"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Hopefully,<sp/>the<sp/>user<sp/>understands<sp/>that<sp/>&quot;...&quot;<sp/>indicates</highlight></codeline>
<codeline lineno="598"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>that<sp/>there<sp/>are<sp/>more<sp/>gaps.</highlight></codeline>
<codeline lineno="599"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out_of_room<sp/>=<sp/><ref refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" kindref="member">YES</ref>;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__private_8h_1adb530699583bc4f2ea5f59bbc08f5c64" kindref="member">APPEND</ref><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>...<sp/>&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>normal<sp/>case;<sp/>add<sp/>this<sp/>gap<sp/>to<sp/>the<sp/>string<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf<sp/>(substring,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>%lu-%lu&quot;</highlight><highlight class="normal">,<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>,<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>);</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__private_8h_1adb530699583bc4f2ea5f59bbc08f5c64" kindref="member">APPEND</ref><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/>substring);</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>We<sp/>already<sp/>ran<sp/>out<sp/>of<sp/>room;<sp/>ignore<sp/>all<sp/>but<sp/>the<sp/>last<sp/>gap<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>is<sp/>the<sp/>last<sp/>gap<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf<sp/>(substring,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>%lu-%lu&quot;</highlight><highlight class="normal">,<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>,<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>);</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__private_8h_1adb530699583bc4f2ea5f59bbc08f5c64" kindref="member">APPEND</ref><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/>substring);</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="622"><highlight class="normal"></highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Show<sp/>how<sp/>many<sp/>gaps<sp/>there<sp/>are<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>sprintf<sp/>(substring,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>(%lu<sp/>total<sp/>gaps)\n&quot;</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="nak_8c_1aaf8402ecf3338efa9120d2a299a86ffb" kindref="member">nak__how_many_filedata_gaps</ref><sp/>(nak_ptr));</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="cfdp__private_8h_1adb530699583bc4f2ea5f59bbc08f5c64" kindref="member">APPEND</ref><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/>substring);</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>LONGEST_STRING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>LONGEST_SUBSTRING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="631"><highlight class="normal"></highlight></codeline>
<codeline lineno="632"><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"></highlight></codeline>
<codeline lineno="634"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="635" refid="nak_8h_1ad7508955275728f832bae91dbce452bf" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1ad7508955275728f832bae91dbce452bf" kindref="member">nak__gaps_as_string</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>max_string_length)</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="638"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LONGEST_SUBSTRING<sp/>32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>first_gap<sp/>=<sp/><ref refid="nak_8c_1a7ebc9a785e5ab85457c98595aac81589" kindref="member">YES</ref>;</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>length;</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p;</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substring<sp/>[<ref refid="nak_8c_1a9bdb0ce08ca65e9f1414894282331af1" kindref="member">LONGEST_SUBSTRING</ref>];</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="644"><highlight class="normal"></highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>string<sp/>and<sp/>its<sp/>length<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>memset<sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/>0,<sp/>max_string_length);</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>length<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="648"><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Append<sp/>one<sp/>file-gap<sp/>at<sp/>a<sp/>time<sp/>to<sp/>the<sp/>string<sp/>until<sp/>either<sp/>all<sp/>the</highlight></codeline>
<codeline lineno="650"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>file-gaps<sp/>are<sp/>included<sp/>or<sp/>we<sp/>reach<sp/>the<sp/>end<sp/>of<sp/>the<sp/>string.</highlight></codeline>
<codeline lineno="651"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p=nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;<sp/>p!=<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>;<sp/>p=p-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>)</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Generate<sp/>a<sp/>substring<sp/>that<sp/>represents<sp/>the<sp/>current<sp/>file-gap<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(first_gap)</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Don&apos;t<sp/>put<sp/>a<sp/>space<sp/>at<sp/>the<sp/>front<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf<sp/>(substring,<sp/></highlight><highlight class="stringliteral">&quot;%lu-%lu&quot;</highlight><highlight class="normal">,<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>,<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>);</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>first_gap<sp/>=<sp/><ref refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>;</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf<sp/>(substring,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>%lu-%lu&quot;</highlight><highlight class="normal">,<sp/>p-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>,<sp/>p-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>);</highlight></codeline>
<codeline lineno="663"><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(length<sp/>+<sp/>strlen<sp/>(substring)<sp/>&gt;<sp/>max_string_length)</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>We&apos;re<sp/>out<sp/>of<sp/>room,<sp/>so<sp/>stop.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="utils_8c_1a63c00f4c72a6c9c2c151b5f1b03dc603" kindref="member">utils__strncat</ref><sp/>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">,<sp/>substring,<sp/>max_string_length);</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>length<sp/>+=<sp/>strlen<sp/>(substring);</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="671"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>LONGEST_SUBSTRING</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"></highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"></highlight></codeline>
<codeline lineno="675"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="676" refid="nak_8h_1add3a8f00158d3b1ecf1780c6450ad43b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak_8c_1add3a8f00158d3b1ecf1780c6450ad43b" kindref="member">nak__metadata_sent_or_received</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr)</highlight></codeline>
<codeline lineno="677"><highlight class="normal">{</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a10a9c51ea5f393093f2814362cc9d939" kindref="member">is_metadata_missing</ref><sp/>=<sp/><ref refid="nak_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>;</highlight></codeline>
<codeline lineno="680"><highlight class="normal">}</highlight></codeline>
<codeline lineno="681"><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"></highlight></codeline>
<codeline lineno="684"><highlight class="normal"></highlight><highlight class="comment">/*=r=*************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="685" refid="nak_8h_1a215e6568779881a32e0671089decbf5c" refkind="member"><highlight class="normal"><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><ref refid="nak_8c_1a215e6568779881a32e0671089decbf5c" kindref="member">nak__how_many_bytes_missing</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr)</highlight></codeline>
<codeline lineno="686"><highlight class="normal">{</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer;</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ptr;</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>the<sp/>answer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/>answer<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="693"><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>Nak-list<sp/>is<sp/>empty,<sp/>then<sp/>no<sp/>bytes<sp/>are<sp/>missing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref><sp/>==<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(answer);</highlight></codeline>
<codeline lineno="697"><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Otherwise,<sp/>add<sp/>the<sp/>bytes<sp/>missing<sp/>in<sp/>each<sp/>gap<sp/>to<sp/>get<sp/>the<sp/>total<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/>ptr<sp/>=<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1abc8812e8a65c2078604e01f676830569" kindref="member">head</ref>;</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(ptr<sp/>!=<sp/><ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>)</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptr-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>==<sp/>ptr-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>)</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>indicates<sp/>a<sp/>missing<sp/>Metadata<sp/>PDU;<sp/>don&apos;t<sp/>count<sp/>it<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer<sp/>+=<sp/>ptr-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>-<sp/>ptr-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref><sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ptr<sp/>=<sp/>ptr-&gt;<ref refid="structgap_1ad2570b6ec1c81c481d237cce1e195cfa" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="709"><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(answer);</highlight></codeline>
<codeline lineno="711"><highlight class="normal">}</highlight></codeline>
<codeline lineno="712"><highlight class="normal"></highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight><highlight class="comment">/*=r=*************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="716" refid="nak_8h_1a9a948bd75629e51e14eecdd6246ba452" refkind="member"><highlight class="normal"><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><ref refid="nak_8c_1a9a948bd75629e51e14eecdd6246ba452" kindref="member">nak__how_many_bytes_received</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak_ptr)</highlight></codeline>
<codeline lineno="717"><highlight class="normal">{</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>answer;</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><ref refid="cfdp__config_8h_1ac01419e4e65c010827418e9d8556595d" kindref="member">u_int_4</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total_without_gaps;</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="721"><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Example<sp/>of<sp/>the<sp/>algorithm:</highlight></codeline>
<codeline lineno="723"><highlight class="comment"><sp/><sp/><sp/>*<sp/><sp/><sp/><sp/>assume<sp/>current<sp/>scope<sp/>is<sp/>from<sp/>0-5000<sp/><sp/>(if<sp/>no<sp/>gaps,<sp/>then<sp/>5000<sp/>bytes<sp/>in)</highlight></codeline>
<codeline lineno="724"><highlight class="comment"><sp/><sp/><sp/>*<sp/><sp/><sp/><sp/>assume<sp/>nak-list<sp/>contains<sp/>2000-2999<sp/><sp/><sp/>(1000<sp/>bytes<sp/>missing)</highlight></codeline>
<codeline lineno="725"><highlight class="comment"><sp/><sp/><sp/>*<sp/><sp/><sp/><sp/>Then<sp/>bytes_received<sp/>=<sp/>5000<sp/>-<sp/>1000<sp/>=<sp/>4000</highlight></codeline>
<codeline lineno="726"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="727"><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/>total_without_gaps<sp/>=<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1a046120aa9a95115f4bb0b5a66a6dbdff" kindref="member">end_of_scope</ref><sp/>-<sp/>nak_ptr-&gt;<ref refid="struct_n_a_k_1aee9506694f57879a52b982775a89a447" kindref="member">start_of_scope</ref>;</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/>answer<sp/>=<sp/>total_without_gaps<sp/>-<sp/><ref refid="nak_8c_1a215e6568779881a32e0671089decbf5c" kindref="member">nak__how_many_bytes_missing</ref><sp/>(nak_ptr);</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(answer);</highlight></codeline>
<codeline lineno="731"><highlight class="normal">}</highlight></codeline>
<codeline lineno="732"><highlight class="normal"></highlight></codeline>
<codeline lineno="733"><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="apps/cf/fsw/src/PRI/nak.c"/>
  </compounddef>
</doxygen>
