<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="nak__mem_8c" kind="file" language="C++">
    <compoundname>nak_mem.c</compoundname>
    <includes refid="cfdp_8h" local="yes">cfdp.h</includes>
    <includes refid="cfdp__private_8h" local="yes">cfdp_private.h</includes>
    <incdepgraph>
      <node id="4027">
        <label>misc.h</label>
        <link refid="misc_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4014">
        <label>cfdp_syntax.h</label>
        <link refid="cfdp__syntax_8h"/>
      </node>
      <node id="4015">
        <label>cfdp_requires.h</label>
        <link refid="cfdp__requires_8h"/>
        <childnode refid="4008" relation="include">
        </childnode>
      </node>
      <node id="4017">
        <label>validate_user_config.h</label>
        <link refid="validate__user__config_8h"/>
        <childnode refid="4010" relation="include">
        </childnode>
      </node>
      <node id="4003">
        <label>cfdp_provides.h</label>
        <link refid="cfdp__provides_8h"/>
        <childnode refid="4004" relation="include">
        </childnode>
        <childnode refid="4005" relation="include">
        </childnode>
        <childnode refid="4006" relation="include">
        </childnode>
        <childnode refid="4007" relation="include">
        </childnode>
        <childnode refid="4008" relation="include">
        </childnode>
        <childnode refid="4014" relation="include">
        </childnode>
      </node>
      <node id="4019">
        <label>message_class.h</label>
        <link refid="message__class_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4005">
        <label>stdlib.h</label>
      </node>
      <node id="4018">
        <label>structures.h</label>
        <link refid="structures_8h"/>
        <childnode refid="4008" relation="include">
        </childnode>
      </node>
      <node id="4021">
        <label>event.h</label>
        <link refid="event_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4036">
        <label>callbacks.h</label>
        <link refid="callbacks_8h"/>
      </node>
      <node id="4028">
        <label>nak.h</label>
        <link refid="nak_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4008">
        <label>cfdp_data_structures.h</label>
        <link refid="cfdp__data__structures_8h"/>
        <childnode refid="4009" relation="include">
        </childnode>
        <childnode refid="4010" relation="include">
        </childnode>
      </node>
      <node id="4023">
        <label>pdu_as_string.h</label>
        <link refid="pdu__as__string_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4002">
        <label>cfdp.h</label>
        <link refid="cfdp_8h"/>
        <childnode refid="4003" relation="include">
        </childnode>
        <childnode refid="4015" relation="include">
        </childnode>
      </node>
      <node id="4001">
        <label>apps/cf/fsw/src/PRI/nak_mem.c</label>
        <link refid="nak_mem.c"/>
        <childnode refid="4002" relation="include">
        </childnode>
        <childnode refid="4016" relation="include">
        </childnode>
      </node>
      <node id="4029">
        <label>nak_mem.h</label>
        <link refid="nak__mem_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4034">
        <label>s1.h</label>
        <link refid="s1_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4006">
        <label>string.h</label>
      </node>
      <node id="4013">
        <label>cf_defs.h</label>
        <link refid="cf__defs_8h"/>
      </node>
      <node id="4025">
        <label>machine_list.h</label>
        <link refid="machine__list_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4007">
        <label>unistd.h</label>
      </node>
      <node id="4031">
        <label>aaa.h</label>
        <link refid="aaa_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
        <childnode refid="4016" relation="include">
        </childnode>
      </node>
      <node id="4020">
        <label>timer.h</label>
        <link refid="timer_8h"/>
        <childnode refid="4009" relation="include">
        </childnode>
      </node>
      <node id="4032">
        <label>r1.h</label>
        <link refid="r1_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4022">
        <label>pdu.h</label>
        <link refid="pdu_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
        <childnode refid="4016" relation="include">
        </childnode>
      </node>
      <node id="4009">
        <label>time.h</label>
      </node>
      <node id="4035">
        <label>s2.h</label>
        <link refid="s2_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4024">
        <label>machine.h</label>
        <link refid="machine_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4011">
        <label>osconfig.h</label>
      </node>
      <node id="4016">
        <label>cfdp_private.h</label>
        <link refid="cfdp__private_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
        <childnode refid="4017" relation="include">
        </childnode>
        <childnode refid="4018" relation="include">
        </childnode>
        <childnode refid="4019" relation="include">
        </childnode>
        <childnode refid="4020" relation="include">
        </childnode>
        <childnode refid="4021" relation="include">
        </childnode>
        <childnode refid="4022" relation="include">
        </childnode>
        <childnode refid="4023" relation="include">
        </childnode>
        <childnode refid="4024" relation="include">
        </childnode>
        <childnode refid="4025" relation="include">
        </childnode>
        <childnode refid="4026" relation="include">
        </childnode>
        <childnode refid="4027" relation="include">
        </childnode>
        <childnode refid="4028" relation="include">
        </childnode>
        <childnode refid="4029" relation="include">
        </childnode>
        <childnode refid="4030" relation="include">
        </childnode>
        <childnode refid="4031" relation="include">
        </childnode>
        <childnode refid="4032" relation="include">
        </childnode>
        <childnode refid="4033" relation="include">
        </childnode>
        <childnode refid="4034" relation="include">
        </childnode>
        <childnode refid="4035" relation="include">
        </childnode>
        <childnode refid="4036" relation="include">
        </childnode>
      </node>
      <node id="4026">
        <label>mib.h</label>
        <link refid="mib_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
        <childnode refid="4016" relation="include">
        </childnode>
      </node>
      <node id="4010">
        <label>cfdp_config.h</label>
        <link refid="cfdp__config_8h"/>
        <childnode refid="4011" relation="include">
        </childnode>
        <childnode refid="4012" relation="include">
        </childnode>
        <childnode refid="4013" relation="include">
        </childnode>
      </node>
      <node id="4030">
        <label>utils.h</label>
        <link refid="utils_8h"/>
      </node>
      <node id="4033">
        <label>r2.h</label>
        <link refid="r2_8h"/>
        <childnode refid="4002" relation="include">
        </childnode>
      </node>
      <node id="4004">
        <label>stdio.h</label>
      </node>
      <node id="4012">
        <label>cf_platform_cfg.h</label>
        <link refid="cf__platform__cfg_8h"/>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="nak__mem_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" prot="public" static="no">
        <name>NO</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak_mem.c" line="25" column="9" bodyfile="apps/cf/fsw/src/PRI/nak_mem.c" bodystart="25" bodyend="-1"/>
        <referencedby refid="nak__mem_8h_1aa082478453d5bb8b451ce6600d742797" compoundref="nak__mem_8c" startline="53" endline="84">nak_mem__free</referencedby>
        <referencedby refid="nak__mem_8h_1a66dbd4aaa7e98eb8833cb8816a9751c0" compoundref="nak__mem_8c" startline="32" endline="48">nak_mem__init_heap</referencedby>
      </memberdef>
      <memberdef kind="define" id="nak__mem_8c_1a7ebc9a785e5ab85457c98595aac81589" prot="public" static="no">
        <name>YES</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak_mem.c" line="26" column="9" bodyfile="apps/cf/fsw/src/PRI/nak_mem.c" bodystart="26" bodyend="-1"/>
        <referencedby refid="nak__mem_8h_1aaf9213754508469f0f30a14f5fbcc597" compoundref="nak__mem_8c" startline="89" endline="114">nak_mem__malloc</referencedby>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="nak__mem_8c_1a66dbd4aaa7e98eb8833cb8816a9751c0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak_mem__init_heap</definition>
        <argsstring>(NAK *nak)</argsstring>
        <name>nak_mem__init_heap</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak_mem.c" line="32" column="1" bodyfile="apps/cf/fsw/src/PRI/nak_mem.c" bodystart="32" bodyend="48"/>
        <references refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" compoundref="structures_8h" startline="289">NAK::in_use</references>
        <references refid="cfdp__private_8h_1a3c51312b51aeb843730561f7943ab0c7" compoundref="cfdp__private_8h" startline="35">IS_DYNAMIC_ALLOCATION_ENABLED</references>
        <references refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" compoundref="cfdp__config_8h" startline="91">MAX_GAPS_PER_TRANSACTION</references>
        <references refid="nak__mem_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak__mem_8c" startline="25">NO</references>
        <referencedby refid="nak_8h_1a75559ed69d551bae8df5c28783c96840" compoundref="nak_8c" startline="392" endline="412">nak__init</referencedby>
        <referencedby refid="pdu_8h_1ac773324209edd845bce0eb39620333c4" compoundref="pdu_8c" startline="1148" endline="1230">pdu__nak_struct_from_nak_pdu</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak__mem_8c_1aa082478453d5bb8b451ce6600d742797" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void nak_mem__free</definition>
        <argsstring>(NAK *nak, NODE *ptr)</argsstring>
        <name>nak_mem__free</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak</declname>
        </param>
        <param>
          <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak_mem.c" line="53" column="1" bodyfile="apps/cf/fsw/src/PRI/nak_mem.c" bodystart="53" bodyend="84"/>
        <references refid="structgap_1a12391414ff856122bc95438776497cbd" compoundref="structures_8h" startline="138">gap::begin</references>
        <references refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" compoundref="utils_8c" startline="508" endline="512">cfdp_is_message_class_enabled</references>
        <references refid="cfdp__provides_8h_1ab2aa48801846bbea30c5299af3419bf4" compoundref="cfdp__provides_8h" startline="214">CFDP_MSG_DEBUG_MEMORY_USE</references>
        <references refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" compoundref="callbacks_8h" startline="60">d_msg__</references>
        <references refid="callbacks_8h_1a4ea80b031f7b1097eff43e0bf6756da2" compoundref="callbacks_8h" startline="63">e_msg__</references>
        <references refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" compoundref="structures_8h" startline="139">gap::end</references>
        <references refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" compoundref="structures_8h" startline="290">NAK::gap</references>
        <references refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" compoundref="structures_8h" startline="289">NAK::in_use</references>
        <references refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" compoundref="cfdp__config_8h" startline="91">MAX_GAPS_PER_TRANSACTION</references>
        <references refid="nak__mem_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" compoundref="nak__mem_8c" startline="25">NO</references>
        <referencedby refid="aaa_8h_1a77aeff2d16620a5f809f7a104646e56e" compoundref="aaa_8c" startline="976" endline="1027">aaa__shutdown</referencedby>
        <referencedby refid="nak_8c_1a75f8e61f7298cfb9fa407cbc096f6664" compoundref="nak_8c" startline="193" endline="228">m__remove_node</referencedby>
      </memberdef>
      <memberdef kind="function" id="nak__mem_8c_1aaf9213754508469f0f30a14f5fbcc597" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="nak__mem_8h_1adeae4e0f77bcb3757d936eed1748bf4c" kindref="member">NODE</ref> *</type>
        <definition>NODE* nak_mem__malloc</definition>
        <argsstring>(NAK *nak)</argsstring>
        <name>nak_mem__malloc</name>
        <param>
          <type><ref refid="struct_n_a_k" kindref="compound">NAK</ref> *</type>
          <declname>nak</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="apps/cf/fsw/src/PRI/nak_mem.c" line="89" column="1" bodyfile="apps/cf/fsw/src/PRI/nak_mem.c" bodystart="89" bodyend="114"/>
        <references refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" compoundref="utils_8c" startline="508" endline="512">cfdp_is_message_class_enabled</references>
        <references refid="cfdp__provides_8h_1ab2aa48801846bbea30c5299af3419bf4" compoundref="cfdp__provides_8h" startline="214">CFDP_MSG_DEBUG_MEMORY_USE</references>
        <references refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" compoundref="callbacks_8h" startline="60">d_msg__</references>
        <references refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" compoundref="structures_8h" startline="290">NAK::gap</references>
        <references refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" compoundref="structures_8h" startline="289">NAK::in_use</references>
        <references refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" compoundref="cfdp__config_8h" startline="91">MAX_GAPS_PER_TRANSACTION</references>
        <references refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</references>
        <references refid="nak__mem_8c_1a7ebc9a785e5ab85457c98595aac81589" compoundref="nak__mem_8c" startline="26">YES</references>
        <referencedby refid="nak_8c_1a26e3801976b7fca6682d6eaf77eb9564" compoundref="nak_8c" startline="64" endline="93">m__new_node</referencedby>
        <referencedby refid="pdu_8h_1ac773324209edd845bce0eb39620333c4" compoundref="pdu_8c" startline="1148" endline="1230">pdu__nak_struct_from_nak_pdu</referencedby>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>FILE:<sp/>nak_mem.c<sp/>--<sp/>a<sp/>module<sp/>that<sp/>manages<sp/>memory<sp/>within<sp/>a<sp/>NAK<sp/>structure.</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/><sp/>Copyright<sp/>©<sp/>2007-2014<sp/>United<sp/>States<sp/>Government<sp/>as<sp/>represented<sp/>by<sp/>the<sp/></highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/><sp/>Administrator<sp/>of<sp/>the<sp/>National<sp/>Aeronautics<sp/>and<sp/>Space<sp/>Administration.<sp/></highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/>All<sp/>Other<sp/>Rights<sp/>Reserved.<sp/><sp/></highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/><sp/>This<sp/>software<sp/>was<sp/>created<sp/>at<sp/>NASA&apos;s<sp/>Goddard<sp/>Space<sp/>Flight<sp/>Center.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/><sp/>This<sp/>software<sp/>is<sp/>governed<sp/>by<sp/>the<sp/>NASA<sp/>Open<sp/>Source<sp/>Agreement<sp/>and<sp/>may<sp/>be<sp/></highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/><sp/>used,<sp/>distributed<sp/>and<sp/>modified<sp/>only<sp/>pursuant<sp/>to<sp/>the<sp/>terms<sp/>of<sp/>that<sp/></highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/><sp/>agreement.</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>SPECS:<sp/><sp/>see<sp/>&apos;nak_mem.h&apos;</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>ORIGINAL<sp/>PROGRAMMER:<sp/><sp/>Tim<sp/>Ray<sp/>301-286-0581</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>CHANGES:</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2007_07_31<sp/>Tim<sp/>Ray<sp/>(TR)</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Official<sp/>release.<sp/><sp/>(see<sp/>pre_release_changes.log<sp/>for<sp/>earlier<sp/>changes)</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/><sp/><sp/>2007_12_06<sp/>TR</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>-<sp/>Enhancement.<sp/><sp/>Message-class<sp/>filtering<sp/>can<sp/>now<sp/>be<sp/>changed<sp/>on-the-fly.</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">/*#include<sp/>&lt;malloc.h&gt;*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cfdp_8h" kindref="compound">cfdp.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cfdp__private_8h" kindref="compound">cfdp_private.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25" refid="nak__mem_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NO<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="nak__mem_8c_1a7ebc9a785e5ab85457c98595aac81589" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>YES<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="nak__mem_8h_1a66dbd4aaa7e98eb8833cb8816a9751c0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak__mem_8c_1a66dbd4aaa7e98eb8833cb8816a9751c0" kindref="member">nak_mem__init_heap</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak)</highlight></codeline>
<codeline lineno="33"><highlight class="normal">{</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>static<sp/>allocation,<sp/>mark<sp/>that<sp/>each<sp/>&apos;slot&apos;<sp/>in<sp/>the<sp/>array<sp/>is<sp/>unused<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=0;<sp/>i&lt;<ref refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" kindref="member">MAX_GAPS_PER_TRANSACTION</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>nak-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i]<sp/>=<sp/><ref refid="nak__mem_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>;</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal">#elif<sp/><ref refid="cfdp__private_8h_1a3c51312b51aeb843730561f7943ab0c7" kindref="member">IS_DYNAMIC_ALLOCATION_ENABLED</ref>==1</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>action<sp/>necessary<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal">#</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/>#error<sp/>Enable<sp/>or<sp/>disable<sp/>dynamic<sp/>memory<sp/>allocation<sp/>in<sp/></highlight><highlight class="stringliteral">&apos;cfdp_config.h&apos;</highlight><highlight class="normal">.</highlight></codeline>
<codeline lineno="47"><highlight class="normal">#endif</highlight></codeline>
<codeline lineno="48"><highlight class="normal">}</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53" refid="nak__mem_8h_1aa082478453d5bb8b451ce6600d742797" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="nak__mem_8c_1aa082478453d5bb8b451ce6600d742797" kindref="member">nak_mem__free</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak,<sp/><ref refid="structgap" kindref="compound">NODE</ref><sp/>*ptr)</highlight></codeline>
<codeline lineno="54"><highlight class="normal">{</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/>i;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Search<sp/>the<sp/>static<sp/>array<sp/>for<sp/>a<sp/>slot<sp/>that<sp/>matches<sp/>the<sp/>given<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>On<sp/>2006_08_02,<sp/>I<sp/>noticed<sp/>a<sp/>bug<sp/>due<sp/>to<sp/>the<sp/>algorithm<sp/>potentially</highlight></codeline>
<codeline lineno="61"><highlight class="comment"><sp/><sp/><sp/>*<sp/>matching<sp/>an<sp/>array<sp/>slot<sp/>that<sp/>is<sp/>not<sp/>currently<sp/>in<sp/>use.</highlight></codeline>
<codeline lineno="62"><highlight class="comment"><sp/><sp/><sp/>*<sp/>So,<sp/>a<sp/>line<sp/>of<sp/>code<sp/>was<sp/>added.<sp/><sp/><sp/><sp/>Tim<sp/>Ray</highlight></codeline>
<codeline lineno="63"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=0;<sp/>i&lt;<ref refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" kindref="member">MAX_GAPS_PER_TRANSACTION</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptr-&gt;<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref><sp/>==<sp/>nak-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i].<ref refid="structgap_1a12391414ff856122bc95438776497cbd" kindref="member">begin</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptr-&gt;<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref><sp/>==<sp/>nak-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i].<ref refid="structgap_1a503365cbf83e5bb8917f912403f39e3a" kindref="member">end</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(nak-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i]))<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>this<sp/>line<sp/>added<sp/>on<sp/>2006_08_02<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Found<sp/>the<sp/>matching<sp/>slot;<sp/>&apos;free&apos;<sp/>it<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" kindref="member">cfdp_is_message_class_enabled</ref><sp/>(<ref refid="cfdp__provides_8h_1ab2aa48801846bbea30c5299af3419bf4" kindref="member">CFDP_MSG_DEBUG_MEMORY_USE</ref>))</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" kindref="member">d_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;nak_mem:<sp/><sp/>Freeing<sp/>slot<sp/>#%u.\n&quot;</highlight><highlight class="normal">,<sp/>i);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i]<sp/>=<sp/><ref refid="nak__mem_8c_1a996bde01ecac342918f0a2c4e7ce7bd5" kindref="member">NO</ref>;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>matching<sp/>slot<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><ref refid="callbacks_8h_1a4ea80b031f7b1097eff43e0bf6756da2" kindref="member">e_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;cfdp_engine:<sp/>&lt;BUG&gt;<sp/>unable<sp/>to<sp/>&apos;free&apos;<sp/>nak<sp/>memory.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/>free<sp/>(ptr);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#error<sp/>Enable<sp/>or<sp/>disable<sp/>dynamic<sp/>memory<sp/>allocation<sp/>in<sp/>&apos;cfdp_config.h&apos;.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal">}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight><highlight class="comment">/*=r=************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="nak__mem_8h_1aaf9213754508469f0f30a14f5fbcc597" refkind="member"><highlight class="normal"><ref refid="structgap" kindref="compound">NODE</ref><sp/>*<ref refid="nak__mem_8c_1aaf9213754508469f0f30a14f5fbcc597" kindref="member">nak_mem__malloc</ref><sp/>(<ref refid="struct_n_a_k" kindref="compound">NAK</ref><sp/>*nak)</highlight></codeline>
<codeline lineno="90"><highlight class="normal">{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*------------------------------------------------------------*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Search<sp/>the<sp/>static<sp/>array<sp/>for<sp/>a<sp/>slot<sp/>that<sp/>is<sp/>currently<sp/>unused<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i=0;<sp/>i&lt;<ref refid="cfdp__config_8h_1af0a0dd63ccc78131b8592c14753659f1" kindref="member">MAX_GAPS_PER_TRANSACTION</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!nak-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i])</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Found<sp/>a<sp/>free<sp/>slot;<sp/>use<sp/>it<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="utils_8c_1aee92f9b6fa5ec147dc249b15c5b0545b" kindref="member">cfdp_is_message_class_enabled</ref><sp/>(<ref refid="cfdp__provides_8h_1ab2aa48801846bbea30c5299af3419bf4" kindref="member">CFDP_MSG_DEBUG_MEMORY_USE</ref>))</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="callbacks_8h_1ad74681df8dc1b4216d9aad2543a95748" kindref="member">d_msg__</ref><sp/>(</highlight><highlight class="stringliteral">&quot;nak_mem:<sp/><sp/>Allocating<sp/>slot<sp/>#%u.\n&quot;</highlight><highlight class="normal">,<sp/>i);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nak-&gt;<ref refid="struct_n_a_k_1a2ae41f6899529ee96e3339d4cbce8c4a" kindref="member">in_use</ref>[i]<sp/>=<sp/><ref refid="nak__mem_8c_1a7ebc9a785e5ab85457c98595aac81589" kindref="member">YES</ref>;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(&amp;(nak-&gt;<ref refid="struct_n_a_k_1af1e1ca6e491d5e9b343e8e30d2c9e112" kindref="member">gap</ref>[i]));</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>All<sp/>slots<sp/>are<sp/>in<sp/>use<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="common__types_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member" external="/home/vagrant/airliner/build/reference/default/docs/html/cfe/detailed_design/cfe.tag">NULL</ref>);</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>IS_DYNAMIC_ALLOCATION_ENABLED==1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(malloc<sp/>(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structgap" kindref="compound">NODE</ref>)));</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#error<sp/>Enable<sp/>or<sp/>disable<sp/>dynamic<sp/>memory<sp/>allocation<sp/>in<sp/>&apos;cfdp_config.h&apos;.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="apps/cf/fsw/src/PRI/nak_mem.c"/>
  </compounddef>
</doxygen>
